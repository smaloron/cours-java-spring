<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-05-11T08:51:19.812561"><title>La configuration | Spring</title><script type="application/json" id="virtual-toc-data">[{"id":"les-fichiers-application-properties","level":0,"title":"Les Fichiers application.properties","anchor":"#les-fichiers-application-properties"},{"id":"les-fichiers-application-yml-ou-application-yaml","level":0,"title":"Les Fichiers application.yml ou application.yaml","anchor":"#les-fichiers-application-yml-ou-application-yaml"},{"id":"gestion-des-profils","level":0,"title":"Gestion des Profils","anchor":"#gestion-des-profils"},{"id":"bonnes-pratiques-de-configuration","level":0,"title":"Bonnes Pratiques de Configuration","anchor":"#bonnes-pratiques-de-configuration"},{"id":"exercices-pratiques","level":0,"title":"Exercices Pratiques","anchor":"#exercices-pratiques"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="La configuration | Spring"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/004-00-la-configuration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="La configuration | Spring"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/004-00-la-configuration.html#webpage",
    "url": "writerside-documentation/004-00-la-configuration.html",
    "name": "La configuration | Spring",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Help"
}</script><!-- End Schema.org --></head><body data-id="004-00-La-configuration" data-main-title="La configuration" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="004-00-La-configuration" id="004-00-La-configuration.md">La configuration</h1><p id="gq6o0o_3">Spring Boot vise &agrave; simplifier le d&eacute;veloppement d'applications Spring autonomes et pr&ecirc;tes pour la production. Un aspect cl&eacute; de cette simplification est la gestion de la configuration. Plut&ocirc;t que de n&eacute;cessiter des fichiers XML complexes, Spring Boot favorise une approche bas&eacute;e sur les conventions et permet de configurer l'application de mani&egrave;re flexible via des fichiers de propri&eacute;t&eacute;s, des fichiers YAML, des variables d'environnement, des arguments de ligne de commande, etc.</p><p id="gq6o0o_4">Ce support se concentre sur les m&eacute;thodes les plus courantes : les fichiers <code class="code" id="gq6o0o_11">application.properties</code> et <code class="code" id="gq6o0o_12">application.yml</code>, ainsi que sur les bonnes pratiques associ&eacute;es.</p><section class="chapter"><h2 id="les-fichiers-application-properties" data-toc="les-fichiers-application-properties">Les Fichiers <code class="code" id="gq6o0o_16">application.properties</code></h2><section class="chapter"><h3 id="pr-sentation" data-toc="pr-sentation">Pr&eacute;sentation</h3><p id="gq6o0o_17">Le fichier <code class="code" id="gq6o0o_21">application.properties</code> est le moyen le plus classique et le plus simple de fournir une configuration externe &agrave; une application Spring Boot. Il se trouve g&eacute;n&eacute;ralement dans le r&eacute;pertoire <code class="code" id="gq6o0o_22">src/main/resources</code>.</p><p id="gq6o0o_18">La syntaxe est bas&eacute;e sur des paires cl&eacute;-valeur, o&ugrave; chaque propri&eacute;t&eacute; est d&eacute;finie sur une nouvelle ligne.</p><div class="code-block" data-lang="properties">
# Configuration du port du serveur
server.port=8080
# Configuration personnalisée de l'application
app.name=Mon Application Spring
app.version=1.0.0
# Configuration de la base de données (exemple)
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
</div><p id="gq6o0o_20">Les cl&eacute;s peuvent &ecirc;tre hi&eacute;rarchiques, en utilisant le point (<code class="code" id="gq6o0o_23">.</code>) comme s&eacute;parateur. Spring Boot fournit de nombreuses propri&eacute;t&eacute;s pr&eacute;d&eacute;finies (comme <code class="code" id="gq6o0o_24">server.port</code> ou <code class="code" id="gq6o0o_25">spring.datasource.url</code>) que l'on peut surcharger.</p></section><section class="chapter"><h3 id="acc-der-aux-valeurs-de-configuration" data-toc="acc-der-aux-valeurs-de-configuration">Acc&eacute;der aux Valeurs de Configuration</h3><p id="gq6o0o_26">Il existe principalement deux fa&ccedil;ons d'acc&eacute;der aux valeurs d&eacute;finies dans <code class="code" id="gq6o0o_29">application.properties</code>:</p><section class="chapter"><h4 id="annotation-value" data-toc="annotation-value">Annotation <code class="code" id="gq6o0o_35">@Value</code></h4><p id="gq6o0o_31">L'annotation <code class="code" id="gq6o0o_36">@Value</code> permet d'injecter directement la valeur d'une propri&eacute;t&eacute; dans un champ d'un bean Spring.</p><div class="code-block" data-lang="java">
package fr.formation.spring.services;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

@Service
public class AppInfoService {

    // Injection de la valeur de la propriété 'app.name'
    @Value(&quot;${app.name}&quot;)
    private String applicationName;

    // Injection avec une valeur par défaut si la propriété n'existe pas
    @Value(&quot;${app.description:Application par défaut}&quot;)
    private String applicationDescription;

    // Injection du port du serveur
    @Value(&quot;${server.port}&quot;)
    private int serverPort;

    public void displayAppInfo() {
        System.out.println(&quot;Nom de l'application : &quot; + applicationName);
        System.out.println(&quot;Description : &quot; + applicationDescription);
        System.out.println(&quot;Port du serveur : &quot; + serverPort);
    }
}
</div><p id="gq6o0o_33"><span class="control" id="gq6o0o_37">Avantages :</span> Simple pour injecter quelques propri&eacute;t&eacute;s isol&eacute;es. <span class="control" id="gq6o0o_38">Inconv&eacute;nients :</span></p><ul class="list _bullet" id="gq6o0o_34"><li class="list__item" id="gq6o0o_39"><p id="gq6o0o_42">Peut devenir verbeux si de nombreuses propri&eacute;t&eacute;s sont n&eacute;cessaires.</p></li><li class="list__item" id="gq6o0o_40"><p id="gq6o0o_43">Moins de s&eacute;curit&eacute; de type (erreurs de frappe dans la cl&eacute; non d&eacute;tect&eacute;es &agrave; la compilation).</p></li><li class="list__item" id="gq6o0o_41"><p id="gq6o0o_44">Ne g&egrave;re pas bien les structures de configuration complexes.</p></li></ul></section><section class="chapter"><h4 id="annotation-configurationproperties-approche-type-safe" data-toc="annotation-configurationproperties-approche-type-safe">Annotation <code class="code" id="gq6o0o_53">@ConfigurationProperties</code> (Approche Type-Safe)</h4><p id="gq6o0o_46">Cette approche est plus robuste et recommand&eacute;e pour regrouper des propri&eacute;t&eacute;s li&eacute;es. Elle mappe des blocs de propri&eacute;t&eacute;s sur un objet Java (POJO).</p><p id="gq6o0o_47"><span class="control" id="gq6o0o_54">&Eacute;tape 1 : Cr&eacute;er une classe de configuration</span></p><div class="code-block" data-lang="java">
package fr.formation.spring.config;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

// Mappe toutes les propriétés commençant par 'app'
@Component // Rend ce bean géré par Spring
@ConfigurationProperties(prefix = &quot;app&quot;)
public class AppProperties {

    private String name; // Correspond à app.name
    private String version; // Correspond à app.version
    private String description = &quot;Description par défaut&quot;; // Valeur par défaut

    // Getters et Setters sont nécessaires pour le binding
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getVersion() {
        return version;
    }

    public void setVersion(String version) {
        this.version = version;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }
}
</div><p id="gq6o0o_49"><span class="control" id="gq6o0o_55">&Eacute;tape 2 : Injecter et utiliser la classe de configuration</span></p><div class="code-block" data-lang="java">
package fr.formation.spring.services;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import fr.formation.spring.config.AppProperties; // Import

@Service
public class AnotherAppInfoService {

    private final AppProperties appProperties;

    // Injection via le constructeur (recommandé)
    @Autowired
    public AnotherAppInfoService(AppProperties appProperties) {
        this.appProperties = appProperties;
    }

    public void displayAppDetails() {
        System.out.println(&quot;--- Via @ConfigurationProperties ---&quot;);
        System.out.println(&quot;Nom App : &quot; + appProperties.getName());
        System.out.println(&quot;Version App : &quot; + appProperties.getVersion());
        System.out.println(&quot;Description App : &quot; + appProperties.getDescription());
    }
}
</div><p id="gq6o0o_51"><span class="control" id="gq6o0o_56">Avantages :</span></p><ul class="list _bullet" id="gq6o0o_52"><li class="list__item" id="gq6o0o_57"><p id="gq6o0o_61">Type-safe (s&eacute;curit&eacute; des types).</p></li><li class="list__item" id="gq6o0o_58"><p id="gq6o0o_62">Regroupement logique des propri&eacute;t&eacute;s.</p></li><li class="list__item" id="gq6o0o_59"><p id="gq6o0o_63">Meilleure lisibilit&eacute; et maintenabilit&eacute;.</p></li><li class="list__item" id="gq6o0o_60"><p id="gq6o0o_64">Supporte la validation (JSR-303/JSR-349) en ajoutant des annotations (<code class="code" id="gq6o0o_65">@NotNull</code>, <code class="code" id="gq6o0o_66">@Min</code>, etc.) sur les champs et la d&eacute;pendance <code class="code" id="gq6o0o_67">spring-boot-starter-validation</code>.</p></li></ul></section></section></section><section class="chapter"><h2 id="les-fichiers-application-yml-ou-application-yaml" data-toc="les-fichiers-application-yml-ou-application-yaml">Les Fichiers <code class="code" id="gq6o0o_72">application.yml</code> ou <code class="code" id="gq6o0o_73">application.yaml</code></h2><section class="chapter"><h3 id="pr-sentation_1" data-toc="pr-sentation_1">Pr&eacute;sentation</h3><p id="gq6o0o_74">YAML (YAML Ain't Markup Language) est un format de s&eacute;rialisation de donn&eacute;es souvent utilis&eacute; pour les fichiers de configuration en raison de sa lisibilit&eacute; humaine. Spring Boot le supporte nativement (via la librairie SnakeYAML, incluse dans <code class="code" id="gq6o0o_78">spring-boot-starter</code>).</p><p id="gq6o0o_75">Le fichier <code class="code" id="gq6o0o_79">application.yml</code> (ou <code class="code" id="gq6o0o_80">application.yaml</code>) se place &eacute;galement dans <code class="code" id="gq6o0o_81">src/main/resources</code>. S'il est pr&eacute;sent en m&ecirc;me temps qu' <code class="code" id="gq6o0o_82">application.properties</code>, <code class="code" id="gq6o0o_83">application.yml</code> prend g&eacute;n&eacute;ralement la priorit&eacute; pour les propri&eacute;t&eacute;s qui y sont d&eacute;finies.</p><p id="gq6o0o_76">La syntaxe YAML est bas&eacute;e sur l'indentation (espaces, pas de tabulations !) pour repr&eacute;senter la structure hi&eacute;rarchique.</p><div class="code-block" data-lang="yaml">
# Configuration du port du serveur
server:
  port: 8081 # Port différent de l'exemple .properties

# Configuration personnalisée de l'application
app:
  name: Mon Application YAML
  version: 1.1.0
  description: Application configurée via YAML
  # Structure imbriquée
  owner:
    name: Formation Team
    email: contact@formation.fr

# Configuration de la base de données (exemple)
spring:
  datasource:
    url: jdbc:h2:mem:yamldb
    driverClassName: org.h2.Driver
    username: sa
    password:

# Listes en YAML
app:
  # ... autres propriétés app ...
  features:
    - Feature A
    - Feature B
    - Feature C
</div></section><section class="chapter"><h3 id="acc-der-aux-valeurs-de-configuration_1" data-toc="acc-der-aux-valeurs-de-configuration_1">Acc&eacute;der aux Valeurs de Configuration</h3><p id="gq6o0o_84">Les m&eacute;canismes d'acc&egrave;s (<code class="code" id="gq6o0o_87">@Value</code> et <code class="code" id="gq6o0o_88">@ConfigurationProperties</code>) fonctionnent <span class="control" id="gq6o0o_89">exactement de la m&ecirc;me mani&egrave;re</span> avec les fichiers YAML qu'avec les fichiers <code class="code" id="gq6o0o_90">properties</code>.</p><section class="chapter"><h4 id="exemple-avec-value" data-toc="exemple-avec-value">Exemple avec <code class="code" id="gq6o0o_93">@Value</code></h4><div class="code-block" data-lang="java">
// ... dans une classe Service ou Component ...

// Accès à une propriété simple
@Value(&quot;${app.name}&quot;)
private String applicationName;

// Accès à une propriété imbriquée
@Value(&quot;${app.owner.name}&quot;)
private String ownerName;

// Accès à un élément de liste (moins courant avec @Value)
@Value(&quot;${app.features[0]}&quot;)
private String firstFeature;
</div></section><section class="chapter"><h4 id="exemple-avec-configurationproperties" data-toc="exemple-avec-configurationproperties">Exemple avec <code class="code" id="gq6o0o_98">@ConfigurationProperties</code></h4><p id="gq6o0o_95">Il faut adapter la classe Java pour refl&eacute;ter la structure YAML.</p><div class="code-block" data-lang="java">
package fr.formation.spring.config;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

import java.util.List; // Pour la liste
import java.util.ArrayList; // Pour initialiser

@Component
@ConfigurationProperties(prefix = &quot;app&quot;)
public class AppYamlProperties {

    private String name;
    private String version;
    private String description;
    private OwnerProperties owner; // Objet imbriqué
    private List&lt;String&gt; features = new ArrayList&lt;&gt;(); // Liste

    // Classe interne statique pour la structure imbriquée 'owner'
    public static class OwnerProperties {
        private String name;
        private String email;

        // Getters et Setters pour OwnerProperties
        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getEmail() {
            return email;
        }

        public void setEmail(String email) {
            this.email = email;
        }
    }

    // Getters et Setters pour AppYamlProperties
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    // ... autres getters/setters ...
    public OwnerProperties getOwner() {
        return owner;
    }

    public void setOwner(OwnerProperties owner) {
        this.owner = owner;
    }

    public List&lt;String&gt; getFeatures() {
        return features;
    }

    public void setFeatures(List&lt;String&gt; features) {
        this.features = features;
    }
}
</div><p id="gq6o0o_97">L'injection et l'utilisation de <code class="code" id="gq6o0o_99">AppYamlProperties</code> se font de la m&ecirc;me mani&egrave;re que pour <code class="code" id="gq6o0o_100">AppProperties</code>.</p></section></section><section class="chapter"><h3 id="comparaison-properties-vs-yml" data-toc="comparaison-properties-vs-yml">Comparaison <code class="code" id="gq6o0o_104">.properties</code> vs <code class="code" id="gq6o0o_105">.yml</code></h3><ul class="list _bullet" id="gq6o0o_102"><li class="list__item" id="gq6o0o_106"><p id="gq6o0o_108"><span class="control" id="gq6o0o_110"><code class="code" id="gq6o0o_111">.properties</code></span>:</p><ul class="list _bullet" id="gq6o0o_109"><li class="list__item" id="gq6o0o_112"><p id="gq6o0o_116">Syntaxe simple cl&eacute;=valeur.</p></li><li class="list__item" id="gq6o0o_113"><p id="gq6o0o_117">Moins lisible pour les configurations hi&eacute;rarchiques complexes.</p></li><li class="list__item" id="gq6o0o_114"><p id="gq6o0o_118">Pas de support natif pour les listes (n&eacute;cessite indexation <code class="code" id="gq6o0o_119">list[0]</code>, <code class="code" id="gq6o0o_120">list[1]</code>, etc.).</p></li><li class="list__item" id="gq6o0o_115"><p id="gq6o0o_121">Tr&egrave;s r&eacute;pandu dans l'&eacute;cosyst&egrave;me Java historique.</p></li></ul></li><li class="list__item" id="gq6o0o_107"><p id="gq6o0o_122"><span class="control" id="gq6o0o_124"><code class="code" id="gq6o0o_125">.yml</code></span>:</p><ul class="list _bullet" id="gq6o0o_123"><li class="list__item" id="gq6o0o_126"><p id="gq6o0o_131">Syntaxe bas&eacute;e sur l'indentation, plus lisible pour les structures.</p></li><li class="list__item" id="gq6o0o_127"><p id="gq6o0o_132">Excellent support pour les listes et les objets imbriqu&eacute;s.</p></li><li class="list__item" id="gq6o0o_128"><p id="gq6o0o_133">Moins verbeux.</p></li><li class="list__item" id="gq6o0o_129"><p id="gq6o0o_134">Sensible aux erreurs d'indentation (utiliser des espaces !).</p></li><li class="list__item" id="gq6o0o_130"><p id="gq6o0o_135">Format populaire dans les environnements Cloud Native (Kubernetes, Docker Compose).</p></li></ul></li></ul><p id="gq6o0o_103"><span class="control" id="gq6o0o_136">Conseil :</span> Pour des configurations simples, <code class="code" id="gq6o0o_137">.properties</code> suffit. Pour des configurations plus structur&eacute;es ou complexes, <code class="code" id="gq6o0o_138">.yml</code> est souvent pr&eacute;f&eacute;rable pour sa lisibilit&eacute;.</p></section></section><section class="chapter"><h2 id="gestion-des-profils" data-toc="gestion-des-profils">Gestion des Profils</h2><p id="gq6o0o_139">Il est rare qu'une application utilise la m&ecirc;me configuration dans tous les environnements (d&eacute;veloppement, test, production). Spring Boot g&egrave;re cela gr&acirc;ce aux <span class="control" id="gq6o0o_143">profils</span>.</p><p id="gq6o0o_140">Un profil est un identifiant (ex: <code class="code" id="gq6o0o_144">dev</code>, <code class="code" id="gq6o0o_145">test</code>, <code class="code" id="gq6o0o_146">prod</code>) qui permet d'activer un ensemble sp&eacute;cifique de configurations.</p><section class="chapter"><h3 id="d-finir-des-configurations-par-profil" data-toc="d-finir-des-configurations-par-profil">D&eacute;finir des Configurations par Profil</h3><p id="gq6o0o_147">On peut cr&eacute;er des fichiers de configuration sp&eacute;cifiques &agrave; un profil en suivant la convention de nommage <code class="code" id="gq6o0o_157">application-{profil}.properties</code> ou <code class="code" id="gq6o0o_158">application-{profil}.yml</code>.</p><ul class="list _bullet" id="gq6o0o_148"><li class="list__item" id="gq6o0o_159"><p id="gq6o0o_162"><code class="code" id="gq6o0o_163">application.properties</code> (ou <code class="code" id="gq6o0o_164">.yml</code>) : Contient la configuration commune ou par d&eacute;faut.</p></li><li class="list__item" id="gq6o0o_160"><p id="gq6o0o_165"><code class="code" id="gq6o0o_166">application-dev.properties</code> (ou <code class="code" id="gq6o0o_167">.yml</code>) : Contient les surcharges ou ajouts pour l'environnement de d&eacute;veloppement.</p></li><li class="list__item" id="gq6o0o_161"><p id="gq6o0o_168"><code class="code" id="gq6o0o_169">application-prod.properties</code> (ou <code class="code" id="gq6o0o_170">.yml</code>) : Contient les surcharges ou ajouts pour l'environnement de production.</p></li></ul><p id="gq6o0o_149">Les propri&eacute;t&eacute;s d&eacute;finies dans un fichier de profil sp&eacute;cifique (<code class="code" id="gq6o0o_171">application-dev.properties</code>) <span class="control" id="gq6o0o_172">&eacute;crasent</span> celles d&eacute;finies dans le fichier de base (<code class="code" id="gq6o0o_173">application.properties</code>).</p><p id="gq6o0o_150"><span class="control" id="gq6o0o_174">Exemple :</span></p><p id="gq6o0o_151"><code class="code" id="gq6o0o_175">application.properties</code>:</p><div class="code-block" data-lang="properties">
server.port=8080
app.name=Generic App
# Base de données par défaut (mémoire)
spring.datasource.url=jdbc:h2:mem:defaultdb
</div><p id="gq6o0o_153"><code class="code" id="gq6o0o_176">application-dev.properties</code>:</p><div class="code-block" data-lang="properties">
# Surcharge le port pour le dev
server.port=9090
# Utilise une base de données de dev spécifique
spring.datasource.url=jdbc:h2:file:./devdb
logging.level.fr.formation.spring=DEBUG # Log plus verbeux en dev
</div><p id="gq6o0o_155"><code class="code" id="gq6o0o_177">application-prod.properties</code>:</p><div class="code-block" data-lang="properties">
# Utilise une base de données de production (exemple PostgreSQL)
spring.datasource.url=jdbc:postgresql://prod-db-host:5432/prod_db
spring.datasource.username=prod_user
# Mot de passe à gérer de manière sécurisée (voir bonnes pratiques)
spring.datasource.password=${DB_PASSWORD} # Exemple via variable d'environnement
logging.level.fr.formation.spring=INFO # Log moins verbeux en prod
</div></section><section class="chapter"><h3 id="activer-un-profil" data-toc="activer-un-profil">Activer un Profil</h3><p id="gq6o0o_178">Il existe plusieurs mani&egrave;res d'activer un ou plusieurs profils :</p><ol class="list _decimal" id="gq6o0o_179" type="1"><li class="list__item" id="gq6o0o_180"><p id="gq6o0o_184"><span class="control" id="gq6o0o_188">Via <code class="code" id="gq6o0o_189">application.properties</code>/<code class="code" id="gq6o0o_190">application.yml</code>:</span></p><div class="code-block" data-lang="properties">
# Dans application.properties
spring.profiles.active=dev
</div><div class="code-block" data-lang="yaml">
# Dans application.yml
spring:
  profiles:
    active: dev
</div><p id="gq6o0o_187"><span class="emphasis" id="gq6o0o_191">Note : D&eacute;finir le profil actif dans le fichier de configuration principal est utile pour le d&eacute;veloppement, mais moins flexible pour les d&eacute;ploiements.</span></p></li><li class="list__item" id="gq6o0o_181"><p id="gq6o0o_192"><span class="control" id="gq6o0o_194">Via Variable d'Environnement :</span> (M&eacute;thode courante pour les d&eacute;ploiements)</p><div class="code-block" data-lang="bash">
export SPRING_PROFILES_ACTIVE=prod
java -jar my-app.jar
</div></li><li class="list__item" id="gq6o0o_182"><p id="gq6o0o_195"><span class="control" id="gq6o0o_198">Via Argument de Ligne de Commande :</span> (Priorit&eacute; la plus haute)</p><div class="code-block" data-lang="bash">
java -jar my-app.jar --spring.profiles.active=prod,email-notifications
</div><p id="gq6o0o_197">On peut activer plusieurs profils en les s&eacute;parant par une virgule.</p></li><li class="list__item" id="gq6o0o_183"><p id="gq6o0o_199"><span class="control" id="gq6o0o_200">Via l'IDE (Exemple : IntelliJ IDEA) :</span> Dans la configuration de lancement de l'application, on peut sp&eacute;cifier le profil actif dans les &quot;VM options&quot; (<code class="code" id="gq6o0o_201">-Dspring.profiles.active=dev</code>) ou dans les &quot;Program arguments&quot; (<code class="code" id="gq6o0o_202">--spring.profiles.active=dev</code>).</p></li></ol></section></section><section class="chapter"><h2 id="bonnes-pratiques-de-configuration" data-toc="bonnes-pratiques-de-configuration">Bonnes Pratiques de Configuration</h2><ol class="list _decimal" id="gq6o0o_203" type="1"><li class="list__item" id="gq6o0o_204"><p id="gq6o0o_212"><span class="control" id="gq6o0o_213">Externaliser la Configuration :</span> Ne jamais coder en dur des valeurs de configuration (URL de base de donn&eacute;es, cl&eacute;s API, ports, etc.) dans le code source. Utiliser les fichiers <code class="code" id="gq6o0o_214">properties</code>/<code class="code" id="gq6o0o_215">yml</code> ou d'autres m&eacute;canismes externes.</p></li><li class="list__item" id="gq6o0o_205"><p id="gq6o0o_216"><span class="control" id="gq6o0o_217">Utiliser les Profils :</span> S&eacute;parer syst&eacute;matiquement les configurations par environnement (<code class="code" id="gq6o0o_218">dev</code>, <code class="code" id="gq6o0o_219">test</code>, <code class="code" id="gq6o0o_220">staging</code>, <code class="code" id="gq6o0o_221">prod</code>).</p></li><li class="list__item" id="gq6o0o_206"><p id="gq6o0o_222"><span class="control" id="gq6o0o_224">S&eacute;curiser les Informations Sensibles :</span> Ne <span class="control" id="gq6o0o_225">jamais</span> commiter de mots de passe, cl&eacute;s API ou autres secrets dans le d&eacute;p&ocirc;t de code (Git). Utiliser :</p><ul class="list _bullet" id="gq6o0o_223"><li class="list__item" id="gq6o0o_226"><p id="gq6o0o_230">Des variables d'environnement.</p></li><li class="list__item" id="gq6o0o_227"><p id="gq6o0o_231">Des fichiers de configuration externes non versionn&eacute;s.</p></li><li class="list__item" id="gq6o0o_228"><p id="gq6o0o_232">Des solutions de gestion de secrets (HashiCorp Vault, AWS Secrets Manager, Azure Key Vault).</p></li><li class="list__item" id="gq6o0o_229"><p id="gq6o0o_233">Spring Cloud Config Server avec backend s&eacute;curis&eacute;.</p></li></ul></li><li class="list__item" id="gq6o0o_207"><p id="gq6o0o_234"><span class="control" id="gq6o0o_235">Pr&eacute;ferer <code class="code" id="gq6o0o_237">@ConfigurationProperties</code>:</span> Pour les configurations structur&eacute;es, utiliser <code class="code" id="gq6o0o_236">@ConfigurationProperties</code> pour la s&eacute;curit&eacute; de type, la validation et la lisibilit&eacute;.</p></li><li class="list__item" id="gq6o0o_208"><p id="gq6o0o_238"><span class="control" id="gq6o0o_239">Nommage Coh&eacute;rent :</span> Utiliser des pr&eacute;fixes clairs et coh&eacute;rents pour les propri&eacute;t&eacute;s personnalis&eacute;es (ex: <code class="code" id="gq6o0o_240">app.*</code>, <code class="code" id="gq6o0o_241">email.service.*</code>). Le format <code class="code" id="gq6o0o_242">kebab-case</code> (<code class="code" id="gq6o0o_243">mon-app.ma-propriete</code>) est courant dans <code class="code" id="gq6o0o_244">properties</code>/<code class="code" id="gq6o0o_245">yml</code> et se mappe automatiquement en <code class="code" id="gq6o0o_246">camelCase</code> (<code class="code" id="gq6o0o_247">monApp.maPropriete</code>) dans les classes <code class="code" id="gq6o0o_248">@ConfigurationProperties</code>.</p></li><li class="list__item" id="gq6o0o_209"><p id="gq6o0o_249"><span class="control" id="gq6o0o_250">Valeurs par D&eacute;faut Sens&eacute;es :</span> Fournir des valeurs par d&eacute;faut raisonnables pour les propri&eacute;t&eacute;s, surtout pour l'environnement de d&eacute;veloppement.</p></li><li class="list__item" id="gq6o0o_210"><p id="gq6o0o_251"><span class="control" id="gq6o0o_252">Documentation :</span> Documenter les propri&eacute;t&eacute;s de configuration personnalis&eacute;es, par exemple via JavaDoc sur les classes <code class="code" id="gq6o0o_253">@ConfigurationProperties</code> ou dans un fichier <code class="code" id="gq6o0o_254">README.md</code>. L'utilisation du processeur d'annotations <code class="code" id="gq6o0o_255">spring-boot-configuration-processor</code> g&eacute;n&egrave;re des m&eacute;tadonn&eacute;es utiles pour l'autocompl&eacute;tion dans les IDEs.</p></li><li class="list__item" id="gq6o0o_211"><p id="gq6o0o_256"><span class="control" id="gq6o0o_257">Validation :</span> Ajouter la d&eacute;pendance <code class="code" id="gq6o0o_258">spring-boot-starter-validation</code> et utiliser les annotations JSR-303 (<code class="code" id="gq6o0o_259">@NotNull</code>, <code class="code" id="gq6o0o_260">@Min</code>, <code class="code" id="gq6o0o_261">@Max</code>, <code class="code" id="gq6o0o_262">@Pattern</code>, etc.) sur les champs des classes <code class="code" id="gq6o0o_263">@ConfigurationProperties</code> pour valider la configuration au d&eacute;marrage de l'application.</p></li></ol></section><section class="chapter"><h2 id="exercices-pratiques" data-toc="exercices-pratiques">Exercices Pratiques</h2><section class="chapter"><h3 id="exercice-1-configuration-simple-avec-value" data-toc="exercice-1-configuration-simple-avec-value">Exercice 1 : Configuration Simple avec <code class="code" id="gq6o0o_271">@Value</code></h3><p id="gq6o0o_268"><span class="control" id="gq6o0o_272">&Eacute;nonc&eacute; :</span></p><ol class="list _decimal" id="gq6o0o_269" type="1"><li class="list__item" id="gq6o0o_273"><p id="gq6o0o_280">Cr&eacute;ez un nouveau projet Spring Boot (via start.spring.io ou votre IDE) avec la d&eacute;pendance &quot;Web&quot;.</p></li><li class="list__item" id="gq6o0o_274"><p id="gq6o0o_281">Dans <code class="code" id="gq6o0o_283">application.properties</code>, d&eacute;finissez les propri&eacute;t&eacute;s suivantes :</p><ul class="list _bullet" id="gq6o0o_282"><li class="list__item" id="gq6o0o_284"><p id="gq6o0o_286"><code class="code" id="gq6o0o_287">welcome.message=Bonjour et bienvenue !</code></p></li><li class="list__item" id="gq6o0o_285"><p id="gq6o0o_288"><code class="code" id="gq6o0o_289">admin.email=admin@example.com</code></p></li></ul></li><li class="list__item" id="gq6o0o_275"><p id="gq6o0o_290">Cr&eacute;ez un <code class="code" id="gq6o0o_291">RestController</code> nomm&eacute; <code class="code" id="gq6o0o_292">GreetingController</code>.</p></li><li class="list__item" id="gq6o0o_276"><p id="gq6o0o_293">Injectez les valeurs des propri&eacute;t&eacute;s <code class="code" id="gq6o0o_294">welcome.message</code> et <code class="code" id="gq6o0o_295">admin.email</code> dans ce contr&ocirc;leur en utilisant l'annotation <code class="code" id="gq6o0o_296">@Value</code>.</p></li><li class="list__item" id="gq6o0o_277"><p id="gq6o0o_297">Cr&eacute;ez un endpoint GET <code class="code" id="gq6o0o_298">/greeting</code> qui retourne la valeur de <code class="code" id="gq6o0o_299">welcome.message</code>.</p></li><li class="list__item" id="gq6o0o_278"><p id="gq6o0o_300">Cr&eacute;ez un endpoint GET <code class="code" id="gq6o0o_301">/admin-info</code> qui retourne la valeur de <code class="code" id="gq6o0o_302">admin.email</code>.</p></li><li class="list__item" id="gq6o0o_279"><p id="gq6o0o_303">Testez vos endpoints.</p></li></ol><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-1" data-toc="correction-exercice-1">Correction Exercice 1</h4></div><div class="collapse__content"><p id="gq6o0o_304"><code class="code" id="gq6o0o_312">src/main/resources/application.properties</code>:</p><div class="code-block" data-lang="properties">
welcome.message=Bonjour et bienvenue !
admin.email=admin@example.com
server.port=8080 # Port optionnel
</div><p id="gq6o0o_306"><code class="code" id="gq6o0o_313">src/main/java/fr/formation/spring/controllers/GreetingController.java</code>:</p><div class="code-block" data-lang="java">
package fr.formation.spring.controllers;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class GreetingController {

    // Injection du message d'accueil
    @Value(&quot;${welcome.message}&quot;)
    private String welcomeMessage;

    // Injection de l'email admin
    @Value(&quot;${admin.email}&quot;)
    private String adminEmail;

    // Endpoint pour le message d'accueil
    @GetMapping(&quot;/greeting&quot;)
    public String getGreeting() {
        return this.welcomeMessage;
    }

    // Endpoint pour l'info admin
    @GetMapping(&quot;/admin-info&quot;)
    public String getAdminInfo() {
        return &quot;Email Admin : &quot; + this.adminEmail;
    }
}
</div><p id="gq6o0o_308"><code class="code" id="gq6o0o_314">src/main/java/fr/formation/spring/DemoApplication.java</code>: (Classique)</p><div class="code-block" data-lang="java">
package fr.formation.spring;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class DemoApplication {
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}
</div><p id="gq6o0o_310"><span class="emphasis" id="gq6o0o_315">Pour tester, lancez l'application et acc&eacute;dez &agrave; <code class="code" id="gq6o0o_316">http://localhost:8080/greeting</code> et <code class="code" id="gq6o0o_317">http://localhost:8080/admin-info</code> dans votre navigateur.</span></p></div></div></section></section><section class="chapter"><h3 id="exercice-2-configuration-structur-e-avec-configurationproperties-et-yaml" data-toc="exercice-2-configuration-structur-e-avec-configurationproperties-et-yaml">Exercice 2 : Configuration Structur&eacute;e avec <code class="code" id="gq6o0o_322">@ConfigurationProperties</code> et YAML</h3><p id="gq6o0o_319"><span class="control" id="gq6o0o_323">&Eacute;nonc&eacute; :</span></p><ol class="list _decimal" id="gq6o0o_320" type="1"><li class="list__item" id="gq6o0o_324"><p id="gq6o0o_334">Supprimez (ou commentez) les propri&eacute;t&eacute;s de l'exercice 1 dans <code class="code" id="gq6o0o_335">application.properties</code>.</p></li><li class="list__item" id="gq6o0o_325"><p id="gq6o0o_336">Cr&eacute;ez un fichier <code class="code" id="gq6o0o_337">application.yml</code> dans <code class="code" id="gq6o0o_338">src/main/resources</code>.</p></li><li class="list__item" id="gq6o0o_326"><p id="gq6o0o_339">D&eacute;finissez une structure de configuration pour un service de notification :</p><div class="code-block" data-lang="yaml">
notification:
  service:
    enabled: true
    default-sender: notification@myapp.com
    retry-attempts: 3
    supported-channels:
      - email
      - sms
</div></li><li class="list__item" id="gq6o0o_327"><p id="gq6o0o_341">Cr&eacute;ez une classe de configuration <code class="code" id="gq6o0o_342">NotificationProperties</code> dans le package <code class="code" id="gq6o0o_343">fr.formation.spring.config</code> pour mapper cette structure en utilisant <code class="code" id="gq6o0o_344">@ConfigurationProperties(prefix = &quot;notification.service&quot;)</code>. N'oubliez pas les getters/setters.</p></li><li class="list__item" id="gq6o0o_328"><p id="gq6o0o_345">Assurez-vous que cette classe est scann&eacute;e par Spring (utilisez <code class="code" id="gq6o0o_346">@Component</code> ou <code class="code" id="gq6o0o_347">@EnableConfigurationProperties</code>).</p></li><li class="list__item" id="gq6o0o_329"><p id="gq6o0o_348">Cr&eacute;ez un service <code class="code" id="gq6o0o_349">NotificationService</code> dans le package <code class="code" id="gq6o0o_350">fr.formation.spring.services</code>.</p></li><li class="list__item" id="gq6o0o_330"><p id="gq6o0o_351">Injectez <code class="code" id="gq6o0o_352">NotificationProperties</code> dans <code class="code" id="gq6o0o_353">NotificationService</code> via le constructeur.</p></li><li class="list__item" id="gq6o0o_331"><p id="gq6o0o_354">Cr&eacute;ez une m&eacute;thode dans <code class="code" id="gq6o0o_355">NotificationService</code> qui affiche les d&eacute;tails de configuration charg&eacute;s (enabled, sender, attempts, channels).</p></li><li class="list__item" id="gq6o0o_332"><p id="gq6o0o_356">Injectez <code class="code" id="gq6o0o_357">NotificationService</code> dans <code class="code" id="gq6o0o_358">GreetingController</code> et ajoutez un endpoint GET <code class="code" id="gq6o0o_359">/notification-config</code> qui appelle la m&eacute;thode d'affichage du service et retourne un message simple (ex: &quot;Config affich&eacute;e dans la console&quot;).</p></li><li class="list__item" id="gq6o0o_333"><p id="gq6o0o_360">Testez.</p></li></ol><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-2" data-toc="correction-exercice-2">Correction Exercice 2</h4></div><div class="collapse__content"><p id="gq6o0o_361"><code class="code" id="gq6o0o_371">src/main/resources/application.yml</code>:</p><div class="code-block" data-lang="yaml">
notification:
  service:
    enabled: true
    default-sender: notification@myapp.com # Note: kebab-case
    retry-attempts: 3 # Note: kebab-case
    supported-channels: # Note: kebab-case
      - email
      - sms

server:
  port: 8080 # Optionnel
</div><p id="gq6o0o_363"><code class="code" id="gq6o0o_372">src/main/java/fr/formation/spring/config/NotificationProperties.java</code>:</p><div class="code-block" data-lang="java">
package fr.formation.spring.config;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

import java.util.ArrayList;
import java.util.List;

@Component // Rend le bean géré par Spring
@ConfigurationProperties(prefix = &quot;notification.service&quot;)
public class NotificationProperties {

    private boolean enabled;
    // Mappage automatique de kebab-case vers camelCase
    private String defaultSender;
    private int retryAttempts;
    private List&lt;String&gt; supportedChannels = new ArrayList&lt;&gt;();

    // --- Getters et Setters ---
    public boolean isEnabled() {
        return enabled;
    }

    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }

    public String getDefaultSender() {
        return defaultSender;
    }

    public void setDefaultSender(String defaultSender) {
        this.defaultSender = defaultSender;
    }

    public int getRetryAttempts() {
        return retryAttempts;
    }

    public void setRetryAttempts(int retryAttempts) {
        this.retryAttempts = retryAttempts;
    }

    public List&lt;String&gt; getSupportedChannels() {
        return supportedChannels;
    }

    public void setSupportedChannels(List&lt;String&gt; supportedChannels) {
        this.supportedChannels = supportedChannels;
    }
}
</div><p id="gq6o0o_365"><code class="code" id="gq6o0o_373">src/main/java/fr/formation/spring/services/NotificationService.java</code>:</p><div class="code-block" data-lang="java">
package fr.formation.spring.services;

import org.springframework.stereotype.Service;
import fr.formation.spring.config.NotificationProperties; // Import
import jakarta.annotation.PostConstruct; // Pour l'affichage au démarrage

@Service
public class NotificationService {

    private final NotificationProperties notificationProperties;

    // Injection par constructeur
    public NotificationService(NotificationProperties notificationProperties) {
        this.notificationProperties = notificationProperties;
    }

    // Méthode pour afficher la configuration
    public void displayConfig() {
        System.out.println(&quot;--- Configuration Notification ---&quot;);
        System.out.println(&quot;Service Activé : &quot; + notificationProperties.isEnabled());
        System.out.println(&quot;Expéditeur par défaut : &quot; + notificationProperties.getDefaultSender());
        System.out.println(&quot;Tentatives : &quot; + notificationProperties.getRetryAttempts());
        System.out.println(&quot;Canaux supportés : &quot; + notificationProperties.getSupportedChannels());
    }

    // Optionnel: Affiche la config au démarrage pour vérification facile
    @PostConstruct
    public void init() {
        displayConfig();
    }
}
</div><p id="gq6o0o_367"><code class="code" id="gq6o0o_374">src/main/java/fr/formation/spring/controllers/GreetingController.java</code>: (Ajouter l'injection et l'endpoint)</p><div class="code-block" data-lang="java">
package fr.formation.spring.controllers;

// ... autres imports ...

import fr.formation.spring.services.NotificationService; // Import
import org.springframework.beans.factory.annotation.Autowired; // Import

@RestController
public class GreetingController {

    // ... (propriétés @Value de l'exo 1 peuvent rester ou être enlevées)

    private final NotificationService notificationService;

    // Injection de NotificationService (et autres si nécessaire)
    @Autowired
    public GreetingController(NotificationService notificationService) {
        this.notificationService = notificationService;
        // Initialiser les autres champs injectés si besoin
    }

    // ... (endpoints /greeting et /admin-info) ...

    // Nouvel endpoint pour afficher la config de notification
    @GetMapping(&quot;/notification-config&quot;)
    public String showNotificationConfig() {
        // Affiche dans la console serveur via le service
        this.notificationService.displayConfig();
        return &quot;Configuration de notification affichée dans la console.&quot;;
    }
}
</div><p id="gq6o0o_369"><span class="emphasis" id="gq6o0o_375">Pour tester, lancez l'application. La configuration devrait s'afficher dans la console au d&eacute;marrage (&agrave; cause de <code class="code" id="gq6o0o_376">@PostConstruct</code>). Acc&eacute;dez ensuite &agrave; <code class="code" id="gq6o0o_377">http://localhost:8080/notification-config</code>. La configuration sera de nouveau affich&eacute;e dans la console.</span></p></div></div></section></section><section class="chapter"><h3 id="exercice-3-utilisation-des-profils" data-toc="exercice-3-utilisation-des-profils">Exercice 3 : Utilisation des Profils</h3><p id="gq6o0o_378"><span class="control" id="gq6o0o_381">&Eacute;nonc&eacute; :</span></p><ol class="list _decimal" id="gq6o0o_379" type="1"><li class="list__item" id="gq6o0o_382"><p id="gq6o0o_388">En partant de l'exercice 2, gardez <code class="code" id="gq6o0o_389">application.yml</code> comme fichier de base.</p></li><li class="list__item" id="gq6o0o_383"><p id="gq6o0o_390">Cr&eacute;ez un fichier <code class="code" id="gq6o0o_392">application-dev.yml</code>. Dedans, surchargez les propri&eacute;t&eacute;s suivantes :</p><ul class="list _bullet" id="gq6o0o_391"><li class="list__item" id="gq6o0o_393"><p id="gq6o0o_395"><code class="code" id="gq6o0o_396">notification.service.default-sender</code> &agrave; <code class="code" id="gq6o0o_397">dev-sender@myapp.com</code></p></li><li class="list__item" id="gq6o0o_394"><p id="gq6o0o_398">Ajoutez une nouvelle propri&eacute;t&eacute; : <code class="code" id="gq6o0o_399">logging.level.fr.formation.spring=DEBUG</code></p></li></ul></li><li class="list__item" id="gq6o0o_384"><p id="gq6o0o_400">Cr&eacute;ez un fichier <code class="code" id="gq6o0o_402">application-prod.yml</code>. Dedans, surchargez :</p><ul class="list _bullet" id="gq6o0o_401"><li class="list__item" id="gq6o0o_403"><p id="gq6o0o_407"><code class="code" id="gq6o0o_408">notification.service.enabled</code> &agrave; <code class="code" id="gq6o0o_409">false</code> (d&eacute;sactiv&eacute; en prod pour cet exemple)</p></li><li class="list__item" id="gq6o0o_404"><p id="gq6o0o_410"><code class="code" id="gq6o0o_411">notification.service.default-sender</code> &agrave; <code class="code" id="gq6o0o_412">prod-sender@myapp.com</code></p></li><li class="list__item" id="gq6o0o_405"><p id="gq6o0o_413"><code class="code" id="gq6o0o_414">notification.service.retry-attempts</code> &agrave; <code class="code" id="gq6o0o_415">5</code></p></li><li class="list__item" id="gq6o0o_406"><p id="gq6o0o_416">Ajoutez <code class="code" id="gq6o0o_417">logging.level.fr.formation.spring=WARN</code></p></li></ul></li><li class="list__item" id="gq6o0o_385"><p id="gq6o0o_418">Modifiez la configuration de lancement de votre application pour activer le profil <code class="code" id="gq6o0o_419">dev</code>. Lancez l'application et v&eacute;rifiez via l'endpoint <code class="code" id="gq6o0o_420">/notification-config</code> (et la console) que les valeurs de <code class="code" id="gq6o0o_421">dev</code> sont utilis&eacute;es.</p></li><li class="list__item" id="gq6o0o_386"><p id="gq6o0o_422">Arr&ecirc;tez l'application. Modifiez la configuration de lancement pour activer le profil <code class="code" id="gq6o0o_423">prod</code>. Lancez et v&eacute;rifiez que les valeurs de <code class="code" id="gq6o0o_424">prod</code> sont utilis&eacute;es.</p></li><li class="list__item" id="gq6o0o_387"><p id="gq6o0o_425">Que se passe-t-il si vous lancez l'application sans profil actif ? Quelles valeurs sont utilis&eacute;es ?</p></li></ol><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-3" data-toc="correction-exercice-3">Correction Exercice 3</h4></div><div class="collapse__content"><p id="gq6o0o_426"><code class="code" id="gq6o0o_439">src/main/resources/application.yml</code>: (Fichier de base)</p><div class="code-block" data-lang="yaml">
notification:
  service:
    enabled: true
    default-sender: default-sender@myapp.com # Valeur par défaut
    retry-attempts: 3
    supported-channels:
      - email
      - sms

server:
  port: 8080

# Niveau de log par défaut
logging:
  level:
    fr.formation.spring: INFO
</div><p id="gq6o0o_428"><code class="code" id="gq6o0o_440">src/main/resources/application-dev.yml</code>:</p><div class="code-block" data-lang="yaml">
notification:
  service:
    default-sender: dev-sender@myapp.com # Surcharge

logging:
  level:
    fr.formation.spring: DEBUG # Surcharge
</div><p id="gq6o0o_430"><span class="emphasis" id="gq6o0o_441">(Note : <code class="code" id="gq6o0o_442">enabled</code>, <code class="code" id="gq6o0o_443">retry-attempts</code>, <code class="code" id="gq6o0o_444">supported-channels</code> et <code class="code" id="gq6o0o_445">server.port</code> h&eacute;ritent des valeurs de <code class="code" id="gq6o0o_446">application.yml</code>)</span></p><p id="gq6o0o_431"><code class="code" id="gq6o0o_447">src/main/resources/application-prod.yml</code>:</p><div class="code-block" data-lang="yaml">
notification:
  service:
    enabled: false # Surcharge
    default-sender: prod-sender@myapp.com # Surcharge
    retry-attempts: 5 # Surcharge

logging:
  level:
    fr.formation.spring: WARN # Surcharge
</div><p id="gq6o0o_433"><span class="emphasis" id="gq6o0o_448">(Note : <code class="code" id="gq6o0o_449">supported-channels</code> et <code class="code" id="gq6o0o_450">server.port</code> h&eacute;ritent de <code class="code" id="gq6o0o_451">application.yml</code>)</span></p><p id="gq6o0o_434"><span class="control" id="gq6o0o_452">Activation des profils :</span></p><ul class="list _bullet" id="gq6o0o_435"><li class="list__item" id="gq6o0o_453"><p id="gq6o0o_455"><span class="control" id="gq6o0o_456">Via IDE (Exemple IntelliJ) :</span> Edit Configurations -&gt; Modify options -&gt; Add VM options -&gt; Mettre <code class="code" id="gq6o0o_457">-Dspring.profiles.active=dev</code> (ou <code class="code" id="gq6o0o_458">prod</code>).</p></li><li class="list__item" id="gq6o0o_454"><p id="gq6o0o_459"><span class="control" id="gq6o0o_460">Via Ligne de commande :</span> <code class="code" id="gq6o0o_461">java -jar target/votre-app.jar --spring.profiles.active=dev</code> (ou <code class="code" id="gq6o0o_462">prod</code>).</p></li></ul><p id="gq6o0o_436"><span class="control" id="gq6o0o_463">R&eacute;sultats attendus :</span></p><ul class="list _bullet" id="gq6o0o_437"><li class="list__item" id="gq6o0o_464"><p id="gq6o0o_467"><span class="control" id="gq6o0o_469">Avec profil <code class="code" id="gq6o0o_470">dev</code> actif :</span></p><ul class="list _bullet" id="gq6o0o_468"><li class="list__item" id="gq6o0o_471"><p id="gq6o0o_476">Enabled: <code class="code" id="gq6o0o_477">true</code> (h&eacute;rit&eacute;)</p></li><li class="list__item" id="gq6o0o_472"><p id="gq6o0o_478">Sender: <code class="code" id="gq6o0o_479">dev-sender@myapp.com</code> (surcharg&eacute; par dev)</p></li><li class="list__item" id="gq6o0o_473"><p id="gq6o0o_480">Attempts: <code class="code" id="gq6o0o_481">3</code> (h&eacute;rit&eacute;)</p></li><li class="list__item" id="gq6o0o_474"><p id="gq6o0o_482">Channels: <code class="code" id="gq6o0o_483">[email, sms]</code> (h&eacute;rit&eacute;)</p></li><li class="list__item" id="gq6o0o_475"><p id="gq6o0o_484">Logs <code class="code" id="gq6o0o_485">fr.formation.spring</code>: <code class="code" id="gq6o0o_486">DEBUG</code> (surcharg&eacute; par dev)</p></li></ul></li><li class="list__item" id="gq6o0o_465"><p id="gq6o0o_487"><span class="control" id="gq6o0o_489">Avec profil <code class="code" id="gq6o0o_490">prod</code> actif :</span></p><ul class="list _bullet" id="gq6o0o_488"><li class="list__item" id="gq6o0o_491"><p id="gq6o0o_496">Enabled: <code class="code" id="gq6o0o_497">false</code> (surcharg&eacute; par prod)</p></li><li class="list__item" id="gq6o0o_492"><p id="gq6o0o_498">Sender: <code class="code" id="gq6o0o_499">prod-sender@myapp.com</code> (surcharg&eacute; par prod)</p></li><li class="list__item" id="gq6o0o_493"><p id="gq6o0o_500">Attempts: <code class="code" id="gq6o0o_501">5</code> (surcharg&eacute; par prod)</p></li><li class="list__item" id="gq6o0o_494"><p id="gq6o0o_502">Channels: <code class="code" id="gq6o0o_503">[email, sms]</code> (h&eacute;rit&eacute;)</p></li><li class="list__item" id="gq6o0o_495"><p id="gq6o0o_504">Logs <code class="code" id="gq6o0o_505">fr.formation.spring</code>: <code class="code" id="gq6o0o_506">WARN</code> (surcharg&eacute; par prod)</p></li></ul></li><li class="list__item" id="gq6o0o_466"><p id="gq6o0o_507"><span class="control" id="gq6o0o_509">Sans profil actif :</span></p><ul class="list _bullet" id="gq6o0o_508"><li class="list__item" id="gq6o0o_510"><p id="gq6o0o_516">Les valeurs du fichier de base <code class="code" id="gq6o0o_517">application.yml</code> sont utilis&eacute;es.</p></li><li class="list__item" id="gq6o0o_511"><p id="gq6o0o_518">Enabled: <code class="code" id="gq6o0o_519">true</code></p></li><li class="list__item" id="gq6o0o_512"><p id="gq6o0o_520">Sender: <code class="code" id="gq6o0o_521">default-sender@myapp.com</code></p></li><li class="list__item" id="gq6o0o_513"><p id="gq6o0o_522">Attempts: <code class="code" id="gq6o0o_523">3</code></p></li><li class="list__item" id="gq6o0o_514"><p id="gq6o0o_524">Channels: <code class="code" id="gq6o0o_525">[email, sms]</code></p></li><li class="list__item" id="gq6o0o_515"><p id="gq6o0o_526">Logs <code class="code" id="gq6o0o_527">fr.formation.spring</code>: <code class="code" id="gq6o0o_528">INFO</code></p></li></ul></li></ul></div></div></section></section></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="gq6o0o_529">La gestion de la configuration est un pilier de Spring Boot, offrant flexibilit&eacute; et robustesse. Que ce soit via les fichiers <code class="code" id="gq6o0o_530">.properties</code> traditionnels ou les fichiers <code class="code" id="gq6o0o_531">.yml</code> plus structur&eacute;s, Spring Boot facilite l'acc&egrave;s aux param&egrave;tres de l'application. L'utilisation judicieuse de <code class="code" id="gq6o0o_532">@Value</code> pour des cas simples et de <code class="code" id="gq6o0o_533">@ConfigurationProperties</code> pour des configurations complexes et typ&eacute;es, combin&eacute;e &agrave; la puissance des profils pour la gestion des environnements, permet de construire des applications maintenables et adapt&eacute;es &agrave; diff&eacute;rents contextes de d&eacute;ploiement. Le respect des bonnes pratiques, notamment en mati&egrave;re de s&eacute;curit&eacute; et d'externalisation, est essentiel pour des applications pr&ecirc;tes pour la production.</p></section><div class="last-modified">Last modified: 11 mai 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="003-01-commandline-runner.html" class="navigation-links__prev">CommandLine Runner</a><a href="005-01-les-fichier-env.html" class="navigation-links__next">Les fichier .env</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.js"></script></body></html>