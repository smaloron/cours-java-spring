<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF" data-resizable-sidebar="true"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-05-14T08:21:35.193005"><title>Les contr&ocirc;leurs | Spring</title><script type="application/json" id="virtual-toc-data">[{"id":"fonctionnement","level":0,"title":"Fonctionnement","anchor":"#fonctionnement"},{"id":"diff-rence-avec-restcontroller","level":0,"title":"Différence avec @RestController","anchor":"#diff-rence-avec-restcontroller"},{"id":"le-mapping","level":0,"title":"Le mapping","anchor":"#le-mapping"},{"id":"gestion-de-la-r-ponse","level":0,"title":"Gestion de la réponse","anchor":"#gestion-de-la-r-ponse"},{"id":"la-gestion-des-param-tres-en-entr-e","level":0,"title":"La gestion des paramètres en entrée","anchor":"#la-gestion-des-param-tres-en-entr-e"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Les contr&ocirc;leurs | Spring"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/001-00-les-controleurs.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Les contr&ocirc;leurs | Spring"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/001-00-les-controleurs.html#webpage",
    "url": "writerside-documentation/001-00-les-controleurs.html",
    "name": "Les contr&ocirc;leurs | Spring",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Help"
}</script><!-- End Schema.org --></head><body data-id="001-00-Les-controleurs" data-main-title="Les contrôleurs" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="001-00-Les-controleurs" id="001-00-Les-controleurs.md">Les contrôleurs</h1><p id="z1x98i0_3">Avec Spring, il suffit d'annoter une classe avec <code class="code" id="z1x98i0_11">@Controller</code> pour qu'elle soit reconnue comme tel.</p><p id="z1x98i0_4">L&rsquo;annotation <code class="code" id="z1x98i0_12">@Controller</code> permet &agrave; Spring de :</p><ul class="list _bullet" id="z1x98i0_5"><li class="list__item" id="z1x98i0_13"><p id="z1x98i0_16">d&eacute;tecter cette classe lors du scan des composants</p></li><li class="list__item" id="z1x98i0_14"><p id="z1x98i0_17">l&rsquo;enregistrer comme bean Spring</p></li><li class="list__item" id="z1x98i0_15"><p id="z1x98i0_18">l&rsquo;utiliser pour g&eacute;rer les requ&ecirc;tes HTTP entrantes</p></li></ul><section class="chapter"><h2 id="fonctionnement" data-toc="fonctionnement">Fonctionnement</h2><p id="z1x98i0_19">Les m&eacute;thodes dans une classe annot&eacute;e avec <code class="code" id="z1x98i0_21">@Controller</code> sont g&eacute;n&eacute;ralement annot&eacute;es avec <code class="code" id="z1x98i0_22">@RequestMapping</code> ou d'autres annotations comme <code class="code" id="z1x98i0_23">@GetMapping</code>, <code class="code" id="z1x98i0_24">@PostMapping</code> pour d&eacute;finir la route et la m&eacute;thode qui invoquera ce contr&ocirc;leur.</p><p id="z1x98i0_20">Ces m&eacute;thodes retournent souvent des noms de vues (par exemple : home pour afficher home.html via Thymeleaf).</p></section><section class="chapter"><h2 id="diff-rence-avec-restcontroller" data-toc="diff-rence-avec-restcontroller">Diff&eacute;rence avec @RestController</h2><ul class="list _bullet" id="z1x98i0_25"><li class="list__item" id="z1x98i0_26"><p id="z1x98i0_28"><code class="code" id="z1x98i0_29">@Controller</code> est destin&eacute; &agrave; retourner des vues HTML</p></li><li class="list__item" id="z1x98i0_27"><p id="z1x98i0_30"><code class="code" id="z1x98i0_31">@RestController</code> (ajout&eacute; en Spring 4) combine <code class="code" id="z1x98i0_32">@Controller</code> et <code class="code" id="z1x98i0_33">@ResponseBody</code> cette annotation est utilis&eacute; pour des API REST qui retournent du JSON ou du XML.</p></li></ul></section><section class="chapter"><h2 id="le-mapping" data-toc="le-mapping">Le mapping</h2><p id="z1x98i0_34">L&rsquo;annotation <code class="code" id="z1x98i0_37">@RequestMapping</code> sert &agrave; faire correspondre une requ&ecirc;te HTTP &agrave; une m&eacute;thode d&rsquo;un contr&ocirc;leur. Elle peut &ecirc;tre utilis&eacute;e au niveau d&rsquo;une classe ou d&rsquo;une m&eacute;thode.</p><section class="chapter"><h3 id="exemple-de-request-mapping" data-toc="exemple-de-request-mapping">Exemple de Request Mapping</h3><p id="z1x98i0_38"><span class="control" id="z1x98i0_45">Sur une classe</span></p><div class="code-block" data-lang="java">

@Controller
@RequestMapping(&quot;/users&quot;)
public class UserController {
    // Toutes les routes commencent par /users
}
</div><p id="z1x98i0_40"><span class="control" id="z1x98i0_46">Sur une m&eacute;thode</span></p><div class="code-block" data-lang="java">

@Controller
public class UserController {

    // Route /list
    @RequestMapping(&quot;/list&quot;)
    public String listUsers() {
        return &quot;userList&quot;;
    }

}
</div><p id="z1x98i0_42"><span class="control" id="z1x98i0_47">Combinaison des deux</span></p><div class="code-block" data-lang="java">

@Controller
@RequestMapping(&quot;/products&quot;)
public class ProductController {

    // route /products/all
    @RequestMapping(&quot;/all&quot;)
    public String showAll() {
        // Affiche productList.html
        return &quot;productList&quot;;
    }

    // route /products/details
    @RequestMapping(&quot;/details&quot;)
    public String details() {
        // Affiche productDetails.html
        return &quot;productDetails&quot;;
    }
}
</div><section class="chapter"><h4 id="les-mappings-sp-cialis-s" data-toc="les-mappings-sp-cialis-s">Les mappings sp&eacute;cialis&eacute;s</h4><div class="table-wrapper"><table class="wide" id="z1x98i0_48"><thead><tr class="ijRowHead" id="z1x98i0_49"><th id="z1x98i0_54"><p>Annotation</p></th><th id="z1x98i0_55"><p>&Eacute;quivaut &agrave;</p></th></tr></thead><tbody><tr id="z1x98i0_50"><td id="z1x98i0_56"><p><code class="code" id="z1x98i0_58">@GetMapping</code></p></td><td id="z1x98i0_57"><p><code class="code" id="z1x98i0_59">@RequestMapping(method = RequestMethod.GET)</code></p></td></tr><tr id="z1x98i0_51"><td id="z1x98i0_60"><p><code class="code" id="z1x98i0_62">@PostMapping</code></p></td><td id="z1x98i0_61"><p><code class="code" id="z1x98i0_63">@RequestMapping(method = RequestMethod.POST)</code></p></td></tr><tr id="z1x98i0_52"><td id="z1x98i0_64"><p><code class="code" id="z1x98i0_66">@PutMapping</code></p></td><td id="z1x98i0_65"><p><code class="code" id="z1x98i0_67">@RequestMapping(method = RequestMethod.PUT)</code></p></td></tr><tr id="z1x98i0_53"><td id="z1x98i0_68"><p><code class="code" id="z1x98i0_70">@DeleteMapping</code></p></td><td id="z1x98i0_69"><p>`@RequestMapping(method = RequestMethod.DELETE)</p></td></tr></tbody></table></div></section></section><section class="chapter"><h3 id="les-options-de-requestmapping" data-toc="les-options-de-requestmapping">Les options de <code class="code" id="z1x98i0_76">@RequestMapping</code></h3><div class="table-wrapper"><table class="wide" id="z1x98i0_72"><thead><tr class="ijRowHead" id="z1x98i0_77"><th id="z1x98i0_84"><p>Option</p></th><th id="z1x98i0_85"><p>Type</p></th><th id="z1x98i0_86"><p>Description</p></th><th id="z1x98i0_87"><p>Exemple</p></th></tr></thead><tbody><tr id="z1x98i0_78"><td id="z1x98i0_88"><p>value / path</p></td><td id="z1x98i0_89"><p>String([])</p></td><td id="z1x98i0_90"><p>URL(s) mapp&eacute;e(s) (synonymes)</p></td><td id="z1x98i0_91"><p>@RequestMapping(&quot;/home&quot;)</p></td></tr><tr id="z1x98i0_79"><td id="z1x98i0_92"><p>method</p></td><td id="z1x98i0_93"><p>RequestMethod([])</p></td><td id="z1x98i0_94"><p>M&eacute;thode(s) HTTP accept&eacute;e(s)</p></td><td id="z1x98i0_95"><p>@RequestMapping(method = RequestMethod.GET)</p></td></tr><tr id="z1x98i0_80"><td id="z1x98i0_96"><p>params</p></td><td id="z1x98i0_97"><p>String([])</p></td><td id="z1x98i0_98"><p>Param&egrave;tre(s) requis ou exclus dans l&rsquo;URL</p></td><td id="z1x98i0_99"><p>@RequestMapping(params = &quot;id&quot;)</p></td></tr><tr id="z1x98i0_81"><td id="z1x98i0_100"><p>headers</p></td><td id="z1x98i0_101"><p>String([])</p></td><td id="z1x98i0_102"><p>Header(s) requis pour traiter la requ&ecirc;te</p></td><td id="z1x98i0_103"><p>@RequestMapping(headers = &quot;X-Auth&quot;)</p></td></tr><tr id="z1x98i0_82"><td id="z1x98i0_104"><p>consumes</p></td><td id="z1x98i0_105"><p>String([])</p></td><td id="z1x98i0_106"><p>Type(s) MIME que la m&eacute;thode peut consommer (Content-Type)</p></td><td id="z1x98i0_107"><p>@RequestMapping(consumes = &quot;application/json&quot;)</p></td></tr><tr id="z1x98i0_83"><td id="z1x98i0_108"><p>produces</p></td><td id="z1x98i0_109"><p>String([])</p></td><td id="z1x98i0_110"><p>Type(s) MIME produits par la m&eacute;thode (Accept)</p></td><td id="z1x98i0_111"><p>@RequestMapping(produces = &quot;application/json&quot;)</p></td></tr></tbody></table></div><aside class="prompt" data-type="tip" data-title="" id="z1x98i0_73"><p id="z1x98i0_112">Il est possible de passer une seule option ou bien un tableau d'options d'o&ugrave; la notation `([])</p></aside><section class="chapter"><h4 id="exemples" data-toc="exemples">Exemples</h4><p id="z1x98i0_113"><span class="control" id="z1x98i0_123">Mapping basique avec <code class="code" id="z1x98i0_124">value</code> et <code class="code" id="z1x98i0_125">method</code></span></p><div class="code-block" data-lang="java">

@RequestMapping(value = &quot;/login&quot;, method = RequestMethod.POST)
public String login() {
    return &quot;dashboard&quot;;
}
</div><p id="z1x98i0_115"><span class="control" id="z1x98i0_126">Avec <code class="code" id="z1x98i0_127">params</code>: ne r&eacute;pondre que si un param&egrave;tre est pr&eacute;sent</span></p><div class="code-block" data-lang="java">

@RequestMapping(value = &quot;/search&quot;, params = &quot;q&quot;)
public String search(@RequestParam String q) {
    return &quot;searchResults&quot;;
}
</div><p id="z1x98i0_117"><span class="control" id="z1x98i0_128">Avec <code class="code" id="z1x98i0_129">headers</code>: ne r&eacute;pondre que si un header est pr&eacute;sent</span></p><div class="code-block" data-lang="java">

@RequestMapping(value = &quot;/secure&quot;, headers = &quot;X-Auth-Token&quot;)
public String secureArea() {
    return &quot;securePage&quot;;
}
</div><p id="z1x98i0_119"><span class="control" id="z1x98i0_130">Avec <code class="code" id="z1x98i0_131">consumes</code>: requ&ecirc;te doit avoir un Content-Type pr&eacute;cis</span></p><div class="code-block" data-lang="java">

@RequestMapping(value = &quot;/json&quot;, consumes = &quot;application/json&quot;)
@ResponseBody
public String receiveJson(@RequestBody String json) {
    return &quot;Received&quot;;
}
</div><p id="z1x98i0_121">** Avec <code class="code" id="z1x98i0_132">produces</code>: r&eacute;ponse avec un type MIME sp&eacute;cifique**</p><div class="code-block" data-lang="java">

@RequestMapping(value = &quot;/api/data&quot;, produces = &quot;application/json&quot;)
@ResponseBody
public Data getData() {
    return new Data(&quot;value&quot;);
}
</div></section><section class="chapter"><h4 id="mapping-multiples" data-toc="mapping-multiples">Mapping multiples</h4><p id="z1x98i0_133">Il est possible de d&eacute;finir plusieurs routes dans une annotation de mapping, il suffit de passer un tableau au lieu d'une cha&icirc;ne de caract&egrave;res.</p><div class="code-block" data-lang="java">

@GetMapping({&quot;/category&quot;, &quot;/categorie&quot;})
@ResponseBody
public String category() {
    return &quot;Catégorie &quot;;
}
</div></section></section></section><section class="chapter"><h2 id="gestion-de-la-r-ponse" data-toc="gestion-de-la-r-ponse">Gestion de la r&eacute;ponse</h2><p id="z1x98i0_135">Dans une application web MVC (Mod&egrave;le-Vue-Contr&ocirc;leur), le contr&ocirc;leur joue un r&ocirc;le central. Apr&egrave;s avoir trait&eacute; une requ&ecirc;te HTTP entrante, il ne se contente pas de s&eacute;lectionner une vue et de lui fournir un mod&egrave;le de donn&eacute;es. Il doit aussi souvent manipuler la <span class="emphasis" id="z1x98i0_144">r&eacute;ponse</span> HTTP elle-m&ecirc;me pour influencer le comportement du navigateur client. Cela inclut des op&eacute;rations essentielles comme rediriger l'utilisateur vers une autre page ou ajouter des informations sp&eacute;cifiques dans les en-t&ecirc;tes HTTP. Spring Boot, en s'appuyant sur Spring MVC, offre plusieurs m&eacute;canismes &eacute;l&eacute;gants pour accomplir ces t&acirc;ches sans devoir manipuler directement les objets <code class="code" id="z1x98i0_145">Servlet</code> bruts, bien que cela reste possible. Ce chapitre explore ces m&eacute;canismes dans le contexte d'applications web servant des pages HTML.</p><section class="chapter"><h3 id="le-contexte-requ-te-et-r-ponse-http" data-toc="le-contexte-requ-te-et-r-ponse-http">Le Contexte : Requ&ecirc;te et R&eacute;ponse HTTP</h3><p id="z1x98i0_146">Rappelons bri&egrave;vement le flux d'une requ&ecirc;te web :</p><ol class="list _decimal" id="z1x98i0_147" type="1"><li class="list__item" id="z1x98i0_150"><p id="z1x98i0_159">Le navigateur envoie une requ&ecirc;te HTTP (GET, POST, etc.) &agrave; une URL.</p></li><li class="list__item" id="z1x98i0_151"><p id="z1x98i0_160">Le serveur (ici, l'application Spring Boot) re&ccedil;oit la requ&ecirc;te.</p></li><li class="list__item" id="z1x98i0_152"><p id="z1x98i0_161">Le <code class="code" id="z1x98i0_162">DispatcherServlet</code> de Spring MVC route la requ&ecirc;te vers le contr&ocirc;leur appropri&eacute;.</p></li><li class="list__item" id="z1x98i0_153"><p id="z1x98i0_163">Le contr&ocirc;leur ex&eacute;cute sa logique m&eacute;tier.</p></li><li class="list__item" id="z1x98i0_154"><p id="z1x98i0_164">Le contr&ocirc;leur d&eacute;termine la vue &agrave; afficher et pr&eacute;pare le mod&egrave;le de donn&eacute;es.</p></li><li class="list__item" id="z1x98i0_155"><p id="z1x98i0_165"><span class="control" id="z1x98i0_166">Le contr&ocirc;leur peut &eacute;galement sp&eacute;cifier des instructions particuli&egrave;res pour la r&eacute;ponse HTTP (statut, en-t&ecirc;tes, redirection).</span></p></li><li class="list__item" id="z1x98i0_156"><p id="z1x98i0_167">Le moteur de vues (ex: Thymeleaf) g&eacute;n&egrave;re le HTML en utilisant le mod&egrave;le.</p></li><li class="list__item" id="z1x98i0_157"><p id="z1x98i0_168">Le serveur renvoie la r&eacute;ponse HTTP compl&egrave;te (statut, en-t&ecirc;tes, corps HTML) au navigateur.</p></li><li class="list__item" id="z1x98i0_158"><p id="z1x98i0_169">Le navigateur interpr&egrave;te la r&eacute;ponse (affiche le HTML, suit la redirection, etc.).</p></li></ol><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="796px" preserveAspectRatio="none" style="width:1275px;height:796px;background:#FFFFFF;" version="1.1" viewBox="0 0 1275 796" width="1275px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="444" x="417.5" y="28.5352">Flux de Traitement d'une Requ&#234;te Web dans Spring Boot MVC</text><rect fill="#FFFFFF" height="505.2109" style="stroke:#181818;stroke-width:1.0;" width="10" x="323" y="150.2871"/><rect fill="#FFFFFF" height="431.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="640" y="179.5977"/><rect fill="#FFFFFF" height="241.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="224.2188"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1123" y="509.9453"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="45" x2="45" y1="118.9766" y2="715.8086"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="328" x2="328" y1="118.9766" y2="715.8086"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="644.5" x2="644.5" y1="118.9766" y2="715.8086"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="918.5" x2="918.5" y1="118.9766" y2="715.8086"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1127.5" x2="1127.5" y1="118.9766" y2="715.8086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="5" y="116.0234">Navigateur</text><ellipse cx="45" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M45,58.9883 L45,85.9883 M32,66.9883 L58,66.9883 M45,85.9883 L32,100.9883 M45,85.9883 L58,100.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="5" y="728.3438">Navigateur</text><ellipse cx="45" cy="739.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M45,747.7969 L45,774.7969 M32,755.7969 L58,755.7969 M45,774.7969 L32,789.7969 M45,774.7969 L58,789.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="240" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="247" y="108.0234">Application Spring Boot</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="240" y="714.8086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="247" y="735.3438">Application Spring Boot</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="578.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="585.5" y="108.0234">DispatcherServlet</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="578.5" y="714.8086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="585.5" y="735.3438">DispatcherServlet</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="874.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="881.5" y="108.0234">Contr&#244;leur</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="874.5" y="714.8086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="881.5" y="735.3438">Contr&#244;leur</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1067.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1074.5" y="91.5352">Moteur de Vues</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1075" y="108.0234">(ex: Thymeleaf)</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="1067.5" y="714.8086"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1074.5" y="735.3438">Moteur de Vues</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="1075" y="751.832">(ex: Thymeleaf)</text><rect fill="#FFFFFF" height="505.2109" style="stroke:#181818;stroke-width:1.0;" width="10" x="323" y="150.2871"/><rect fill="#FFFFFF" height="431.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="640" y="179.5977"/><rect fill="#FFFFFF" height="241.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="914" y="224.2188"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1123" y="509.9453"/><polygon fill="#181818" points="311,146.2871,321,150.2871,311,154.2871,315,150.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="45" x2="317" y1="150.2871" y2="150.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="63.5" y="145.5449">1. Envoi requ&#234;te HTTP (GET/POST /url)</text><polygon fill="#181818" points="628,175.5977,638,179.5977,628,183.5977,632,179.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="333" x2="634" y1="179.5977" y2="179.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="371" y="174.8555">2. R&#233;ception et transmission requ&#234;te</text><polygon fill="#181818" points="902,220.2188,912,224.2188,902,228.2188,906,224.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="650" x2="908" y1="224.2188" y2="224.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="659.5" y="204.166">3. Routage vers le contr&#244;leur appropri&#233;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="707.5" y="219.4766">(selon @RequestMapping)</text><line style="stroke:#181818;stroke-width:1.0;" x1="924" x2="966" y1="268.8398" y2="268.8398"/><line style="stroke:#181818;stroke-width:1.0;" x1="966" x2="966" y1="268.8398" y2="281.8398"/><line style="stroke:#181818;stroke-width:1.0;" x1="925" x2="966" y1="281.8398" y2="281.8398"/><polygon fill="#181818" points="935,277.8398,925,281.8398,935,285.8398,931,281.8398" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="934" y="248.7871">4. Ex&#233;cution logique m&#233;tier</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="943" y="264.0977">(ex: appel services, BDD...)</text><line style="stroke:#181818;stroke-width:1.0;" x1="924" x2="966" y1="326.4609" y2="326.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="966" x2="966" y1="326.4609" y2="339.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="925" x2="966" y1="339.4609" y2="339.4609"/><polygon fill="#181818" points="935,335.4609,925,339.4609,935,343.4609,931,339.4609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="945.5" y="306.4082">5. Pr&#233;paration du Mod&#232;le</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="943" y="321.7188">(ex: model.addAttribute(...))</text><path d="M929,352.4609 L929,423.4609 L1237,423.4609 L1237,362.4609 L1227,352.4609 L929,352.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1227,352.4609 L1227,362.4609 L1237,362.4609 L1227,352.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="287" x="935" y="370.0293">6. Manipulation optionnelle R&#233;ponse HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="939" y="385.3398">- Ajout En-t&#234;tes (via HttpServletResponse)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="939" y="400.6504">- D&#233;finition Statut</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="939" y="415.9609">- Retour "redirect:/newUrl" ou RedirectView</text><polygon fill="#181818" points="661,461.3242,651,465.3242,661,469.3242,657,465.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="655" x2="918" y1="465.3242" y2="465.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="686" y="445.2715">Retourne nom de vue ("maVue")</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="748.5" y="460.582">et le Mod&#232;le</text><polygon fill="#181818" points="1111,505.9453,1121,509.9453,1111,513.9453,1115,509.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="650" x2="1117" y1="509.9453" y2="509.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="789.5" y="489.8926">7. Demande de rendu de la vue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="848.5" y="505.2031">avec le Mod&#232;le</text><line style="stroke:#181818;stroke-width:1.0;" x1="1133" x2="1175" y1="539.2559" y2="539.2559"/><line style="stroke:#181818;stroke-width:1.0;" x1="1175" x2="1175" y1="539.2559" y2="552.2559"/><line style="stroke:#181818;stroke-width:1.0;" x1="1134" x2="1175" y1="552.2559" y2="552.2559"/><polygon fill="#181818" points="1144,548.2559,1134,552.2559,1144,556.2559,1140,552.2559" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="1140" y="534.5137">G&#233;n&#233;ration du HTML</text><polygon fill="#181818" points="661,577.5664,651,581.5664,661,585.5664,657,581.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="655" x2="1127" y1="581.5664" y2="581.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="810.5" y="576.8242">Retourne le HTML g&#233;n&#233;r&#233;</text><polygon fill="#181818" points="344,606.877,334,610.877,344,614.877,340,610.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="338" x2="644" y1="610.877" y2="610.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="347.5" y="606.1348">Transmet la r&#233;ponse (HTML, en-t&#234;tes, statut)</text><polygon fill="#181818" points="56,651.498,46,655.498,56,659.498,52,655.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50" x2="327" y1="655.498" y2="655.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="82.5" y="635.4453">8. Envoi R&#233;ponse HTTP Compl&#232;te</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="71.5" y="650.7559">(Statut 200 OK, En-t&#234;tes, Corps HTML)</text><line style="stroke:#181818;stroke-width:1.0;" x1="45" x2="87" y1="684.8086" y2="684.8086"/><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="87" y1="684.8086" y2="697.8086"/><line style="stroke:#181818;stroke-width:1.0;" x1="46" x2="87" y1="697.8086" y2="697.8086"/><polygon fill="#181818" points="56,693.8086,46,697.8086,56,701.8086,52,697.8086" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="52" y="680.0664">9. Interpr&#233;tation et Affichage HTML</text><!--SRC=[VLNBTjis4DtpA-Pe8yb7fcMxJLikUYfRRfpJAF6nL7UJ3KAEQBGWmE0Xkt-JPPXr_u0_rW58YfISLXj9vE3EpBrt1cDOSfPhLXG86SAwhZuvb2acyAjmp_xHFNvozLUBy0T-X7MfkSpXIYaBguVhABBS2jp7RZJZ5WkK5hAnaqU7CoRDImIMMgLXz8xjUCuiEZq2Pk1AgoU3EYgPjZpb9IF8qQ8i1K-PvKeESSA1DUhTSVoIcvBPz16rVokmYLok3wEkbRIw_aTqgSD_9SGnsahvwdoR3mxD1pd1vmGsZtyNA91jf-7i0yUd6vbpYL5a_kAI05W10vWxbcM-xlFvuBt1XlGL6iDoN0YUIqY9HIg1FYqNSFfpssK2vp7So9tYe3k2RpUREvYyljcStRrVR-3CQJ7rtF8TaTgn4pNV7ccvJk0YXlkwIh4CZA85gqcYWXlZ_tVGFGen5otN_dJFKGANXAASfSA1i0sG7zAUKc1bgHM9LLSV901C30e2_yKx0urTqMlYOr3gWFwe_tsSz3iYu9bgTw5qeN9ES53KbUMecqHU7a97GVpg7K_HpE1gkOpZUFf_oD_7SAVhoYiJi3C7AvNLNmJsi8NAKCGavS9QpJywYnCFIxYIJ0AQvuyMr7Q02mcSdBoAOSKaBvree5KWNY85U25A9KqZvCa9vJg5nP_4AmbzQhqE1YOxpk3MshArypsQS6OQefTrjUMIDzDXcNKsFBv7gqY6aSQCQqnjSYRnwNSjHg0SlMmUUjz6qHYkoSFd2JsMr7RZT9XGTQLmXbHrv0yxFI2ljLAJXIPUgi8VtFc3eu8HmCYNH-OYc9R8ACDlojrugv-X17w8OOa5ardOJhehIp2V8EW1R8Vf47kFF9p5_lTnXjTr9Ukgr_fsitfx67_SeS0G17bpigw6xGoJ-dO6Cxi9m-M9OA0xjISUQWROQJm34wIR3a7ztFMJsww317xibi21TuZHeXJr5zlwjR42NCpdyFwtMU-c6GNgqeHU3h9rksAmTlOfVuhXZLzB9JLWMRSs5jijJn_z0cZOQtnqaUpjvUCc_bhmTgyhg3-367k44k7LbEB3s2ZVOE-76VLDOxFcnnj5TqeCF6sPpcc_pwXdYdwn-24C1eA_a_RS1qSD2hoSNvnTpY-dG23CWU18PXk75KA51OiDRu2OwZwG6Fv3u-CyhIANy-SPl5NjVNQBB4FjkNYXDE5-I-V9W5r_xiKr0K6ljUDDESCItYct2sjdVt_GpT6ixvPAscN_0W00]--></g></svg></div></section><section class="chapter"><h3 id="gestion-des-redirections" data-toc="gestion-des-redirections">Gestion des Redirections</h3><p id="z1x98i0_170">Une redirection HTTP (typiquement avec le statut 302 Found ou 303 See Other) demande au navigateur d'effectuer une nouvelle requ&ecirc;te vers une URL diff&eacute;rente. C'est une technique fondamentale dans le d&eacute;veloppement web.</p><section class="chapter"><h4 id="pourquoi-utiliser-les-redirections" data-toc="pourquoi-utiliser-les-redirections">Pourquoi utiliser les Redirections ?</h4><ul class="list _bullet" id="z1x98i0_174"><li class="list__item" id="z1x98i0_175"><p id="z1x98i0_179"><span class="control" id="z1x98i0_180">Pattern POST-Redirect-GET (PRG) :</span> C'est le cas d'usage le plus courant. Apr&egrave;s la soumission r&eacute;ussie d'un formulaire (POST), il est crucial de rediriger l'utilisateur vers une page de confirmation (GET). Cela &eacute;vite le probl&egrave;me de la &quot;double soumission&quot; si l'utilisateur rafra&icirc;chit la page de confirmation (qui serait le r&eacute;sultat du POST sinon).</p></li><li class="list__item" id="z1x98i0_176"><p id="z1x98i0_181"><span class="control" id="z1x98i0_182">Navigation apr&egrave;s une action :</span> Apr&egrave;s une action comme la suppression d'un &eacute;l&eacute;ment, on redirige souvent l'utilisateur vers la liste mise &agrave; jour.</p></li><li class="list__item" id="z1x98i0_177"><p id="z1x98i0_183"><span class="control" id="z1x98i0_184">URL Canoniques / SEO :</span> Rediriger des URLs alternatives vers une URL pr&eacute;f&eacute;r&eacute;e.</p></li><li class="list__item" id="z1x98i0_178"><p id="z1x98i0_185"><span class="control" id="z1x98i0_186">Contr&ocirc;le d'acc&egrave;s :</span> Rediriger les utilisateurs non authentifi&eacute;s vers une page de connexion.</p></li></ul></section><section class="chapter"><h4 id="m-thode-1-le-pr-fixe-redirect" data-toc="m-thode-1-le-pr-fixe-redirect">M&eacute;thode 1 : Le pr&eacute;fixe <code class="code" id="z1x98i0_195">redirect:</code></h4><p id="z1x98i0_188">La mani&egrave;re la plus simple et la plus fr&eacute;quente d'effectuer une redirection dans Spring MVC est de retourner une <code class="code" id="z1x98i0_196">String</code> pr&eacute;fix&eacute;e par <code class="code" id="z1x98i0_197">redirect:</code> depuis la m&eacute;thode du contr&ocirc;leur.</p><ul class="list _bullet" id="z1x98i0_189"><li class="list__item" id="z1x98i0_198"><p id="z1x98i0_200"><span class="control" id="z1x98i0_201">Fonctionnement :</span> Spring MVC d&eacute;tecte ce pr&eacute;fixe sp&eacute;cial. Au lieu de chercher une vue nomm&eacute;e &quot;redirect:/...&quot;, il interpr&egrave;te la cha&icirc;ne suivante comme l'URL de redirection et envoie une r&eacute;ponse HTTP avec le statut 302 (Found) et l'en-t&ecirc;te <code class="code" id="z1x98i0_202">Location</code> pointant vers cette URL.</p></li><li class="list__item" id="z1x98i0_199"><p id="z1x98i0_203"><span class="control" id="z1x98i0_205">URL Relatives ou Absolues :</span></p><ul class="list _bullet" id="z1x98i0_204"><li class="list__item" id="z1x98i0_206"><p id="z1x98i0_209"><code class="code" id="z1x98i0_210">redirect:/users</code>: Redirection relative au contexte de l'application. Si l'application tourne sur <code class="code" id="z1x98i0_211">http://localhost:8080/myapp</code>, cela redirige vers <code class="code" id="z1x98i0_212">http://localhost:8080/myapp/users</code>. C'est la forme la plus courante.</p></li><li class="list__item" id="z1x98i0_207"><p id="z1x98i0_213"><code class="code" id="z1x98i0_214">redirect:profile</code>: Redirection relative au chemin courant. Si la requ&ecirc;te &eacute;tait sur <code class="code" id="z1x98i0_215">/users/edit</code>, cela redirige vers <code class="code" id="z1x98i0_216">/users/profile</code>. Moins fr&eacute;quent et potentiellement source d'erreur si mal ma&icirc;tris&eacute;.</p></li><li class="list__item" id="z1x98i0_208"><p id="z1x98i0_217"><code class="code" id="z1x98i0_218">redirect:http://example.com</code>: Redirection vers une URL absolue externe.</p></li></ul></li></ul><p id="z1x98i0_190"><span class="control" id="z1x98i0_219">Exemple de Code :</span></p><div class="code-block" data-lang="java">
package fr.formation.spring.controller;

import fr.formation.spring.model.UserForm; // Supposons une classe UserForm
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

@Controller
@RequestMapping(&quot;/users&quot;)
public class UserController {

    // Affiche le formulaire de création
    @GetMapping(&quot;/new&quot;)
    public String displayUserForm(UserForm userForm) {
        // userForm est ajouté au modèle implicitement
        return &quot;user-form&quot;; // Nom de la vue (ex: user-form.html avec Thymeleaf)
    }

    // Traite la soumission du formulaire
    @PostMapping(&quot;/create&quot;)
    public String createUser(
            UserForm userForm,
            RedirectAttributes redirectAttributes
    ) {
        // Logique pour sauvegarder l'utilisateur...
        // userService.save(userForm); 
        System.out.println(&quot;Utilisateur créé (simulé) : &quot; + userForm.getName());

        // Ajoute un message flash pour la page de confirmation
        redirectAttributes.addFlashAttribute(&quot;message&quot;,
                &quot;Utilisateur créé avec succès !&quot;);

        // Redirige vers la page de confirmation (pattern PRG)
        // L'URL sera /users/creation-success
        return &quot;redirect:/users/creation-success&quot;;
    }

    // Affiche la page de confirmation après redirection
    @GetMapping(&quot;/creation-success&quot;)
    public String displayCreationSuccess() {
        // La vue peut afficher le message flash ajouté via RedirectAttributes
        return &quot;user-success&quot;; // Nom de la vue (ex: user-success.html)
    }
}
</div><p id="z1x98i0_192"><span class="control" id="z1x98i0_220">Cas d'utilisation typique :</span> Traitement de formulaires (PRG).</p><p id="z1x98i0_193"><span class="control" id="z1x98i0_221">Bonnes Pratiques :</span></p><ul class="list _bullet" id="z1x98i0_194"><li class="list__item" id="z1x98i0_222"><p id="z1x98i0_224">Utiliser syst&eacute;matiquement le pattern PRG apr&egrave;s un POST modifiant des donn&eacute;es.</p></li><li class="list__item" id="z1x98i0_223"><p id="z1x98i0_225">Utiliser <code class="code" id="z1x98i0_226">RedirectAttributes</code> pour passer des messages ou des donn&eacute;es simples &agrave; la page cible de la redirection ( attributs &quot;flash&quot; qui ne survivent qu'&agrave; une seule redirection).</p></li></ul></section><section class="chapter"><h4 id="3-3-m-thode-2-utilisation-de-redirectview" data-toc="3-3-m-thode-2-utilisation-de-redirectview">3.3. M&eacute;thode 2 : Utilisation de <code class="code" id="z1x98i0_236">RedirectView</code></h4><p id="z1x98i0_228">Pour plus de contr&ocirc;le ou pour construire dynamiquement l'URL de redirection, on peut retourner un objet <code class="code" id="z1x98i0_237">RedirectView</code>.</p><ul class="list _bullet" id="z1x98i0_229"><li class="list__item" id="z1x98i0_238"><p id="z1x98i0_240"><span class="control" id="z1x98i0_241">Fonctionnement :</span> <code class="code" id="z1x98i0_242">RedirectView</code> est une impl&eacute;mentation de l'interface <code class="code" id="z1x98i0_243">View</code> de Spring. Retourner une instance de <code class="code" id="z1x98i0_244">RedirectView</code> indique explicitement &agrave; Spring d'effectuer une redirection.</p></li><li class="list__item" id="z1x98i0_239"><p id="z1x98i0_245"><span class="control" id="z1x98i0_247">Avantages :</span></p><ul class="list _bullet" id="z1x98i0_246"><li class="list__item" id="z1x98i0_248"><p id="z1x98i0_251">Permet de d&eacute;finir le code de statut HTTP (par d&eacute;faut 302, mais on peut forcer 303 See Other, plus s&eacute;mantique pour PRG).</p></li><li class="list__item" id="z1x98i0_249"><p id="z1x98i0_252">Permet de construire l'URL de mani&egrave;re programmatique.</p></li><li class="list__item" id="z1x98i0_250"><p id="z1x98i0_253">Peut encoder automatiquement les param&egrave;tres d'URL.</p></li></ul></li></ul><p id="z1x98i0_230"><span class="control" id="z1x98i0_254">Exemple de Code :</span></p><div class="code-block" data-lang="java">
package fr.formation.spring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.view.RedirectView;
import org.springframework.http.HttpStatus;

@Controller
@RequestMapping(&quot;/products&quot;)
public class ProductController {

    // Supposons une action de recherche qui redirige vers une page de résultats
    @PostMapping(&quot;/search&quot;)
    public RedirectView searchProduct(
            @RequestParam(&quot;query&quot;) String searchQuery
    ) {
        // Construit l'URL de redirection dynamiquement
        String targetUrl = &quot;/products/results?q=&quot; + searchQuery;

        RedirectView redirectView = new RedirectView(targetUrl);
        // Optionnel: Utiliser 303 See Other pour PRG
        redirectView.setStatusCode(HttpStatus.SEE_OTHER);
        // Optionnel: Ne pas exposer le modèle dans l'URL si non nécessaire
        redirectView.setExposeModelAttributes(false);

        System.out.println(&quot;Redirection vers : &quot; + targetUrl);
        return redirectView;
    }

    // Page affichant les résultats (la cible de la redirection)
    @GetMapping(&quot;/results&quot;)
    public String displaySearchResults(
            @RequestParam(&quot;q&quot;) String query
            // Model model // Pour ajouter les résultats à la vue
    ) {
        System.out.println(&quot;Affichage des résultats pour : &quot; + query);
        // Logique pour récupérer les produits correspondants...
        // model.addAttribute(&quot;products&quot;, productService.search(query));
        // model.addAttribute(&quot;searchQuery&quot;, query);
        return &quot;product-results&quot;; // Nom de la vue
    }
}
</div><p id="z1x98i0_232"><span class="control" id="z1x98i0_255">Cas d'utilisation typique :</span> Redirections complexes, construction dynamique d'URL, besoin de sp&eacute;cifier un statut HTTP diff&eacute;rent de 302.</p><p id="z1x98i0_233"><span class="control" id="z1x98i0_256">Bonnes Pratiques :</span></p><ul class="list _bullet" id="z1x98i0_234"><li class="list__item" id="z1x98i0_257"><p id="z1x98i0_259">Utiliser <code class="code" id="z1x98i0_260">HttpStatus.SEE_OTHER</code> (303) pour les redirections apr&egrave;s un POST (PRG), car c'est s&eacute;mantiquement plus correct (indique que la <span class="emphasis" id="z1x98i0_261">ressource</span> r&eacute;sultante de l'action se trouve &agrave; la nouvelle URL, &agrave; r&eacute;cup&eacute;rer via GET).</p></li><li class="list__item" id="z1x98i0_258"><p id="z1x98i0_262">Faire attention &agrave; l'encodage des param&egrave;tres si l'URL est construite manuellement (bien que <code class="code" id="z1x98i0_263">RedirectView</code> puisse aider). <code class="code" id="z1x98i0_264">UriComponentsBuilder</code> est un outil utile pour construire des URLs proprement.</p></li></ul></section></section><section class="chapter"><h3 id="exercice-1-redirection-apr-s-connexion" data-toc="exercice-1-redirection-apr-s-connexion">Exercice 1 : Redirection apr&egrave;s Connexion</h3><p id="z1x98i0_265"><span class="control" id="z1x98i0_269">&Eacute;nonc&eacute; :</span> Cr&eacute;ez un contr&ocirc;leur <code class="code" id="z1x98i0_270">LoginController</code> avec :</p><ol class="list _decimal" id="z1x98i0_266" type="1"><li class="list__item" id="z1x98i0_271"><p id="z1x98i0_274">Une m&eacute;thode <code class="code" id="z1x98i0_275">GET</code> sur <code class="code" id="z1x98i0_276">/login</code> qui affiche un formulaire de connexion simple (pas besoin de cr&eacute;er le HTML, juste retourner le nom de la vue &quot;login-form&quot;).</p></li><li class="list__item" id="z1x98i0_272"><p id="z1x98i0_277">Une m&eacute;thode <code class="code" id="z1x98i0_279">POST</code> sur <code class="code" id="z1x98i0_280">/login</code> qui simule une tentative de connexion.</p><ul class="list _bullet" id="z1x98i0_278"><li class="list__item" id="z1x98i0_281"><p id="z1x98i0_283">Si le <code class="code" id="z1x98i0_284">username</code> est &quot;admin&quot; et <code class="code" id="z1x98i0_285">password</code> est &quot;password&quot;, redirigez vers <code class="code" id="z1x98i0_286">/dashboard</code> avec un message flash &quot; Connexion r&eacute;ussie&quot;.</p></li><li class="list__item" id="z1x98i0_282"><p id="z1x98i0_287">Sinon, redirigez de nouveau vers <code class="code" id="z1x98i0_288">/login</code> avec un message flash &quot;Identifiants incorrects&quot;.</p></li></ul></li><li class="list__item" id="z1x98i0_273"><p id="z1x98i0_289">Une m&eacute;thode <code class="code" id="z1x98i0_290">GET</code> sur <code class="code" id="z1x98i0_291">/dashboard</code> qui affiche une page de tableau de bord (retourner le nom de la vue &quot;dashboard&quot;).</p></li></ol><p id="z1x98i0_267">Utilisez la m&eacute;thode du pr&eacute;fixe <code class="code" id="z1x98i0_292">redirect:</code> et <code class="code" id="z1x98i0_293">RedirectAttributes</code>.</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-1" data-toc="correction-exercice-1"><span class="control" id="z1x98i0_297">Correction Exercice 1</span></h4></div><div class="collapse__content"><div class="code-block" data-lang="java">
package fr.formation.spring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

@Controller
@RequestMapping(&quot;/&quot;)
public class LoginController {

    // Affiche le formulaire de login
    @GetMapping(&quot;/login&quot;)
    public String showLoginForm() {
        return &quot;login-form&quot;; // Nom de la vue
    }

    // Traite la soumission du formulaire de login
    @PostMapping(&quot;/login&quot;)
    public String processLogin(
            @RequestParam(&quot;username&quot;) String username,
            @RequestParam(&quot;password&quot;) String password,
            RedirectAttributes redirectAttributes
    ) {
        // Logique de vérification (simpliste ici)
        if (&quot;admin&quot;.equals(username) &amp;&amp; &quot;password&quot;.equals(password)) {
            // Connexion réussie
            redirectAttributes.addFlashAttribute(&quot;message&quot;,
                    &quot;Connexion réussie ! Bienvenue.&quot;);
            // Redirection vers le tableau de bord
            return &quot;redirect:/dashboard&quot;;
        } else {
            // Échec de la connexion
            redirectAttributes.addFlashAttribute(&quot;error&quot;,
                    &quot;Identifiants incorrects.&quot;);
            // Redirection vers le formulaire de login
            return &quot;redirect:/login&quot;;
        }
    }

    // Affiche le tableau de bord
    @GetMapping(&quot;/dashboard&quot;)
    public String showDashboard() {
        // La vue dashboard peut accéder au message flash si présent
        return &quot;dashboard&quot;; // Nom de la vue
    }
}
</div></div></div></section></section><section class="chapter"><h3 id="ajout-d-en-t-tes-http" data-toc="ajout-d-en-t-tes-http">Ajout d'En-t&ecirc;tes HTTP</h3><p id="z1x98i0_298">Les en-t&ecirc;tes HTTP transportent des m&eacute;tadonn&eacute;es sur la requ&ecirc;te ou la r&eacute;ponse. C&ocirc;t&eacute; serveur, ajouter des en-t&ecirc;tes &agrave; la r&eacute;ponse permet de contr&ocirc;ler divers aspects du comportement du client (navigateur, proxy).</p><section class="chapter"><h4 id="pourquoi-ajouter-des-en-t-tes" data-toc="pourquoi-ajouter-des-en-t-tes">Pourquoi ajouter des En-t&ecirc;tes ?</h4><ul class="list _bullet" id="z1x98i0_301"><li class="list__item" id="z1x98i0_302"><p id="z1x98i0_307"><span class="control" id="z1x98i0_308">Gestion du Cache :</span> Indiquer au navigateur comment mettre en cache la ressource (<code class="code" id="z1x98i0_309">Cache-Control</code>, <code class="code" id="z1x98i0_310">Expires</code>, <code class="code" id="z1x98i0_311">Pragma</code>).</p></li><li class="list__item" id="z1x98i0_303"><p id="z1x98i0_312"><span class="control" id="z1x98i0_313">S&eacute;curit&eacute; :</span> D&eacute;finir des politiques de s&eacute;curit&eacute; (<code class="code" id="z1x98i0_314">Content-Security-Policy</code>, <code class="code" id="z1x98i0_315">X-Frame-Options</code>, <code class="code" id="z1x98i0_316">Strict-Transport-Security</code>).</p></li><li class="list__item" id="z1x98i0_304"><p id="z1x98i0_317"><span class="control" id="z1x98i0_318">Type de Contenu :</span> Sp&eacute;cifier explicitement le type MIME de la r&eacute;ponse (<code class="code" id="z1x98i0_319">Content-Type</code>). Bien que Spring le fasse souvent automatiquement pour les vues, on peut vouloir le surcharger.</p></li><li class="list__item" id="z1x98i0_305"><p id="z1x98i0_320"><span class="control" id="z1x98i0_321">Nom de Fichier pour T&eacute;l&eacute;chargement :</span> Sugg&eacute;rer un nom de fichier au navigateur (<code class="code" id="z1x98i0_322">Content-Disposition</code>).</p></li><li class="list__item" id="z1x98i0_306"><p id="z1x98i0_323"><span class="control" id="z1x98i0_324">Informations Personnalis&eacute;es :</span> Ajouter des en-t&ecirc;tes sp&eacute;cifiques &agrave; l'application (souvent pr&eacute;fix&eacute;s par <code class="code" id="z1x98i0_325">X-</code>).</p></li></ul></section><section class="chapter"><h4 id="m-thode-injection-de-httpservletresponse" data-toc="m-thode-injection-de-httpservletresponse">M&eacute;thode : Injection de <code class="code" id="z1x98i0_335">HttpServletResponse</code></h4><p id="z1x98i0_327">La fa&ccedil;on la plus directe et la plus flexible de manipuler les en-t&ecirc;tes (et d'autres aspects de la r&eacute;ponse comme le statut ou les cookies) est d'injecter l'objet <code class="code" id="z1x98i0_336">HttpServletResponse</code> directement dans la m&eacute;thode du contr&ocirc;leur.</p><ul class="list _bullet" id="z1x98i0_328"><li class="list__item" id="z1x98i0_337"><p id="z1x98i0_338"><span class="control" id="z1x98i0_339">Fonctionnement :</span> Spring MVC permet de d&eacute;clarer <code class="code" id="z1x98i0_340">HttpServletResponse</code> comme param&egrave;tre d'une m&eacute;thode de contr&ocirc;leur. Spring injectera alors l'objet r&eacute;ponse associ&eacute; &agrave; la requ&ecirc;te courante. On peut ensuite utiliser les m&eacute;thodes de cet objet (<code class="code" id="z1x98i0_341">setHeader</code>, <code class="code" id="z1x98i0_342">addHeader</code>, <code class="code" id="z1x98i0_343">setContentType</code>, etc.) pour manipuler la r&eacute;ponse <span class="emphasis" id="z1x98i0_344">avant</span> que la vue ne soit rendue ou la redirection effectu&eacute;e.</p></li></ul><p id="z1x98i0_329"><span class="control" id="z1x98i0_345">Exemple de Code :</span></p><div class="code-block" data-lang="java">
package fr.formation.spring.controller;

import jakarta.servlet.http.HttpServletResponse; // Attention: package jakarta... pour Spring Boot 3+
// import javax.servlet.http.HttpServletResponse; // Pour Spring Boot 2.x
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping(&quot;/reports&quot;)
public class ReportController {

    @GetMapping(&quot;/confidential&quot;)
    public String showConfidentialReport(HttpServletResponse response) {
        // Ajoute des en-têtes pour désactiver le cache
        response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);
        response.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;); // Compatibilité HTTP/1.0
        response.setDateHeader(&quot;Expires&quot;, 0); // Proxy caches

        // Ajoute un en-tête personnalisé
        response.setHeader(&quot;X-Report-Generated&quot;, Long.toString(System.currentTimeMillis()));

        // Ajoute un en-tête de sécurité simple
        response.setHeader(&quot;X-Content-Type-Options&quot;, &quot;nosniff&quot;);

        System.out.println(&quot;En-têtes ajoutés à la réponse pour /reports/confidential&quot;);

        // Retourne le nom de la vue normalement
        return &quot;confidential-report&quot;; // Nom de la vue
    }

    // Exemple (théorique) pour suggérer un nom de fichier
    @GetMapping(&quot;/download&quot;)
    public String downloadReport(HttpServletResponse response) {
        // Indique que le contenu doit être traité comme une pièce jointe
        // et suggère un nom de fichier.
        response.setHeader(&quot;Content-Disposition&quot;,
                &quot;attachment; filename=\&quot;report.txt\&quot;&quot;);

        // Important: Il faudrait aussi définir le Content-Type approprié
        // et écrire le contenu du fichier dans response.getOutputStream()
        // Ce qui sort du cadre du simple retour de nom de vue.
        // Pour les vrais téléchargements, utiliser ResponseEntity&lt;Resource&gt; 
        // est souvent plus adapté, même hors contexte REST pur.

        System.out.println(&quot;En-tête Content-Disposition ajouté.&quot;);

        // Dans un cas simple où on retourne juste une vue, 
        // cet en-tête n'aura pas l'effet de télécharger un fichier.
        // Cet exemple illustre juste l'ajout de l'en-tête.
        return &quot;report-download-page&quot;; // Une vue qui pourrait contenir un lien
    }
}
</div><p id="z1x98i0_331"><span class="control" id="z1x98i0_346">Cas d'utilisation typique :</span> D&eacute;finir des politiques de cache sp&eacute;cifiques, ajouter des en-t&ecirc;tes de s&eacute;curit&eacute;, fournir des m&eacute;tadonn&eacute;es personnalis&eacute;es.</p><p id="z1x98i0_332"><span class="control" id="z1x98i0_347">Bonnes Pratiques :</span></p><ul class="list _bullet" id="z1x98i0_333"><li class="list__item" id="z1x98i0_348"><p id="z1x98i0_352">Ajouter les en-t&ecirc;tes <span class="emphasis" id="z1x98i0_353">avant</span> de retourner le nom de la vue ou d'effectuer une redirection.</p></li><li class="list__item" id="z1x98i0_349"><p id="z1x98i0_354">Bien comprendre la signification de chaque en-t&ecirc;te HTTP standard (MDN Web Docs est une excellente ressource).</p></li><li class="list__item" id="z1x98i0_350"><p id="z1x98i0_355">Pour les en-t&ecirc;tes de s&eacute;curit&eacute;, envisager d'utiliser des configurations globales (par exemple avec Spring Security) plut&ocirc;t que de les ajouter manuellement dans chaque contr&ocirc;leur, pour assurer la coh&eacute;rence.</p></li><li class="list__item" id="z1x98i0_351"><p id="z1x98i0_356">Soyez conscient que <code class="code" id="z1x98i0_357">HttpServletResponse</code> est une API de bas niveau (Servlet API). Utilisez-la lorsque les abstractions de Spring ne suffisent pas ou pour un contr&ocirc;le fin.</p></li></ul></section></section><section class="chapter"><h3 id="exercice-2-d-finition-d-en-t-tes-pour-une-page-sp-cifique" data-toc="exercice-2-d-finition-d-en-t-tes-pour-une-page-sp-cifique">Exercice 2 : D&eacute;finition d'En-t&ecirc;tes pour une Page Sp&eacute;cifique</h3><p id="z1x98i0_358"><span class="control" id="z1x98i0_362">&Eacute;nonc&eacute; :</span> Cr&eacute;ez une m&eacute;thode de contr&ocirc;leur <code class="code" id="z1x98i0_363">GET</code> sur <code class="code" id="z1x98i0_364">/legacy-info</code> dans un <code class="code" id="z1x98i0_365">InfoController</code>. Cette m&eacute;thode doit :</p><ol class="list _decimal" id="z1x98i0_359" type="1"><li class="list__item" id="z1x98i0_366"><p id="z1x98i0_369">Retourner le nom de vue &quot;legacy-page&quot;.</p></li><li class="list__item" id="z1x98i0_367"><p id="z1x98i0_370">Ajouter un en-t&ecirc;te HTTP <code class="code" id="z1x98i0_371">X-Compatibility-Mode</code> avec la valeur <code class="code" id="z1x98i0_372">IE7</code>.</p></li><li class="list__item" id="z1x98i0_368"><p id="z1x98i0_373">Ajouter un en-t&ecirc;te <code class="code" id="z1x98i0_374">Cache-Control</code> avec la valeur <code class="code" id="z1x98i0_375">public, max-age=3600</code> pour indiquer que la page peut &ecirc;tre mise en cache pendant une heure.</p></li></ol><p id="z1x98i0_360">Utilisez l'injection de <code class="code" id="z1x98i0_376">HttpServletResponse</code>.</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h4 id="correction-exercice-2" data-toc="correction-exercice-2"><span class="control" id="z1x98i0_380">Correction Exercice 2</span></h4></div><div class="collapse__content"><div class="code-block" data-lang="java">
package fr.formation.spring.controller;

import jakarta.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping(&quot;/info&quot;)
public class InfoController {

    @GetMapping(&quot;/legacy-info&quot;)
    public String showLegacyInfo(HttpServletResponse response) {
        // Ajoute l'en-tête de compatibilité
        response.setHeader(&quot;X-Compatibility-Mode&quot;, &quot;IE7&quot;);

        // Ajoute l'en-tête de cache
        response.setHeader(&quot;Cache-Control&quot;, &quot;public, max-age=3600&quot;);

        System.out.println(&quot;En-têtes X-Compatibility-Mode et Cache-Control ajoutés.&quot;);

        // Retourne le nom de la vue
        return &quot;legacy-page&quot;;
    }
}
</div></div></div></section></section><section class="chapter"><h3 id="conseils-et-bonnes-pratiques-g-n-rales" data-toc="conseils-et-bonnes-pratiques-g-n-rales">Conseils et Bonnes Pratiques G&eacute;n&eacute;rales</h3><ul class="list _bullet" id="z1x98i0_381"><li class="list__item" id="z1x98i0_383"><p id="z1x98i0_389"><span class="control" id="z1x98i0_390">Privil&eacute;gier les abstractions Spring :</span> Utiliser <code class="code" id="z1x98i0_391">redirect:</code> et <code class="code" id="z1x98i0_392">RedirectAttributes</code> pour les redirections simples. Utiliser <code class="code" id="z1x98i0_393">RedirectView</code> pour les cas plus complexes. Recourir &agrave; <code class="code" id="z1x98i0_394">HttpServletResponse</code> pour la manipulation fine des en-t&ecirc;tes lorsque n&eacute;cessaire.</p></li><li class="list__item" id="z1x98i0_384"><p id="z1x98i0_395"><span class="control" id="z1x98i0_396">Pattern PRG :</span> C'est une pratique essentielle pour &eacute;viter les probl&egrave;mes de double soumission de formulaire. Toujours rediriger apr&egrave;s un POST r&eacute;ussi qui modifie l'&eacute;tat de l'application.</p></li><li class="list__item" id="z1x98i0_385"><p id="z1x98i0_397"><span class="control" id="z1x98i0_398">S&eacute;curit&eacute; :</span> Ne pas n&eacute;gliger les en-t&ecirc;tes de s&eacute;curit&eacute; (<code class="code" id="z1x98i0_399">Content-Security-Policy</code>, <code class="code" id="z1x98i0_400">X-Frame-Options</code>, <code class="code" id="z1x98i0_401">X-Content-Type-Options</code>, <code class="code" id="z1x98i0_402">Strict-Transport-Security</code>). Spring Security offre une configuration centralis&eacute;e et robuste pour ces en-t&ecirc;tes.</p></li><li class="list__item" id="z1x98i0_386"><p id="z1x98i0_403"><span class="control" id="z1x98i0_404">Cache :</span> Comprendre les directives <code class="code" id="z1x98i0_405">Cache-Control</code> est crucial pour les performances et la fra&icirc;cheur des donn&eacute;es. D&eacute;finir des politiques de cache appropri&eacute;es pour les diff&eacute;rentes ressources (pages statiques, pages dynamiques, donn&eacute;es confidentielles).</p></li><li class="list__item" id="z1x98i0_387"><p id="z1x98i0_406"><span class="control" id="z1x98i0_407">Statuts HTTP :</span> Utiliser les codes de statut HTTP de mani&egrave;re s&eacute;mantique (ex: 303 See Other pour PRG au lieu de 302 Found si pertinent).</p></li><li class="list__item" id="z1x98i0_388"><p id="z1x98i0_408"><span class="control" id="z1x98i0_409">URLs :</span> Pr&eacute;f&eacute;rer les URLs relatives au contexte (<code class="code" id="z1x98i0_410">redirect:/path</code>) pour les redirections internes &agrave; l'application pour une meilleure portabilit&eacute;.</p></li></ul></section><section class="chapter"><h3 id="cas-d-utilisation-courants-r-capitulatif" data-toc="cas-d-utilisation-courants-r-capitulatif">Cas d'Utilisation Courants (R&eacute;capitulatif)</h3><ul class="list _bullet" id="z1x98i0_411"><li class="list__item" id="z1x98i0_413"><p id="z1x98i0_419"><span class="control" id="z1x98i0_420">Redirection apr&egrave;s soumission de formulaire :</span> <code class="code" id="z1x98i0_421">return &quot;redirect:/confirmation&quot;;</code> avec <code class="code" id="z1x98i0_422">RedirectAttributes</code>.</p></li><li class="list__item" id="z1x98i0_414"><p id="z1x98i0_423"><span class="control" id="z1x98i0_424">Redirection vers la page de connexion si non authentifi&eacute; :</span> Souvent g&eacute;r&eacute; par le framework de s&eacute;curit&eacute; (comme Spring Security), mais peut &ecirc;tre fait manuellement via redirection.</p></li><li class="list__item" id="z1x98i0_415"><p id="z1x98i0_425"><span class="control" id="z1x98i0_426">Redirection apr&egrave;s une action (suppression, mise &agrave; jour) :</span> <code class="code" id="z1x98i0_427">return &quot;redirect:/liste&quot;;</code></p></li><li class="list__item" id="z1x98i0_416"><p id="z1x98i0_428"><span class="control" id="z1x98i0_429">D&eacute;sactivation du cache pour des donn&eacute;es sensibles :</span> Injection de <code class="code" id="z1x98i0_430">HttpServletResponse</code> et <code class="code" id="z1x98i0_431">response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store&quot;);</code>.</p></li><li class="list__item" id="z1x98i0_417"><p id="z1x98i0_432"><span class="control" id="z1x98i0_433">Ajout d'en-t&ecirc;tes de s&eacute;curit&eacute; de base :</span> <code class="code" id="z1x98i0_434">response.setHeader(&quot;X-Frame-Options&quot;, &quot;DENY&quot;);</code>.</p></li><li class="list__item" id="z1x98i0_418"><p id="z1x98i0_435"><span class="control" id="z1x98i0_436">Construction d'URL de redirection complexe :</span> Utilisation de <code class="code" id="z1x98i0_437">RedirectView</code> ou <code class="code" id="z1x98i0_438">UriComponentsBuilder</code>.</p></li></ul></section></section><section class="chapter"><h2 id="la-gestion-des-param-tres-en-entr-e" data-toc="la-gestion-des-param-tres-en-entr-e">La gestion des param&egrave;tres en entr&eacute;e</h2><p id="z1x98i0_439">Un contr&ocirc;leur peut recevoir des param&egrave;tres de plusieurs fa&ccedil;ons.</p><ul class="list _bullet" id="z1x98i0_440"><li class="list__item" id="z1x98i0_451"><p id="z1x98i0_457">Depuis l'URL (deux m&eacute;thodes)</p></li><li class="list__item" id="z1x98i0_452"><p id="z1x98i0_458">Depuis le corps de la requ&ecirc;te (contenu JSON ou XML)</p></li><li class="list__item" id="z1x98i0_453"><p id="z1x98i0_459">Depuis un formulaire</p></li><li class="list__item" id="z1x98i0_454"><p id="z1x98i0_460">Depuis les cookies</p></li><li class="list__item" id="z1x98i0_455"><p id="z1x98i0_461">Depuis la session</p></li><li class="list__item" id="z1x98i0_456"><p id="z1x98i0_462">Depuis les en-t&ecirc;tes HTTP</p></li></ul><p id="z1x98i0_441">Voici la liste des annotations correspondantes. Toutes ces annotations se placent dans la signature de la m&eacute;thode. Spring se charge d'injecter les valeurs dans les arguments. Il est bien entendu possible de placer de multiples annotations dans une m&eacute;thode.</p><div class="table-wrapper"><table class="wide" id="z1x98i0_442"><thead><tr class="ijRowHead" id="z1x98i0_463"><th id="z1x98i0_471"><p>Source</p></th><th id="z1x98i0_472"><p>Annotation Spring</p></th><th id="z1x98i0_473"><p>Exemple d&rsquo;utilisation</p></th></tr></thead><tbody><tr id="z1x98i0_464"><td id="z1x98i0_474"><p>URL (query param)</p></td><td id="z1x98i0_475"><p><code class="code" id="z1x98i0_477">@RequestParam</code></p></td><td id="z1x98i0_476"><p><code class="code" id="z1x98i0_478">?name=John</code></p></td></tr><tr id="z1x98i0_465"><td id="z1x98i0_479"><p>URL (path param)</p></td><td id="z1x98i0_480"><p><code class="code" id="z1x98i0_482">@PathVariable</code></p></td><td id="z1x98i0_481"><p><code class="code" id="z1x98i0_483">/users/42</code></p></td></tr><tr id="z1x98i0_466"><td id="z1x98i0_484"><p>Corps (JSON/XML)</p></td><td id="z1x98i0_485"><p><code class="code" id="z1x98i0_487">@RequestBody</code></p></td><td id="z1x98i0_486"><p>POST avec JSON dans le body</p></td></tr><tr id="z1x98i0_467"><td id="z1x98i0_488"><p>En-t&ecirc;te HTTP</p></td><td id="z1x98i0_489"><p><code class="code" id="z1x98i0_491">@RequestHeader</code></p></td><td id="z1x98i0_490"><p>Lire <code class="code" id="z1x98i0_492">Authorization</code>, <code class="code" id="z1x98i0_493">User-Agent</code>, etc.</p></td></tr><tr id="z1x98i0_468"><td id="z1x98i0_494"><p>Cookie</p></td><td id="z1x98i0_495"><p><code class="code" id="z1x98i0_497">@CookieValue</code></p></td><td id="z1x98i0_496"><p>Lire des cookies</p></td></tr><tr id="z1x98i0_469"><td id="z1x98i0_498"><p>Formulaire</p></td><td id="z1x98i0_499"><p><code class="code" id="z1x98i0_501">@ModelAttribute</code></p></td><td id="z1x98i0_500"><p>Bind un formulaire HTML &agrave; un objet Java</p></td></tr><tr id="z1x98i0_470"><td id="z1x98i0_502"><p>Session</p></td><td id="z1x98i0_503"><p><code class="code" id="z1x98i0_505">@SessionAttribute</code></p></td><td id="z1x98i0_504"><p>Lire une variable de session</p></td></tr></tbody></table></div><section class="chapter"><h3 id="attributs-et-comportement-communs" data-toc="attributs-et-comportement-communs">Attributs et comportement communs</h3></section><section class="chapter"><h3 id="request-param" data-toc="request-param">Request Param</h3><p id="z1x98i0_506">L'annotation <code class="code" id="z1x98i0_511">@RequestParam</code> se place dans la signature de la m&eacute;thode. Le nom de la variable correspond &agrave; celui du param&egrave;tre attendu.</p><div class="code-block" data-lang="java">
// attendu : /greet?name=...
@GetMapping(&quot;/greet&quot;)
@ResponseBody
public String greet(@RequestParam String name) {
    return &quot;Bonjour &quot; + name;
}
</div><section class="chapter"><h4 id="transtypage-automatique" data-toc="transtypage-automatique">Transtypage automatique</h4><p id="z1x98i0_512">Lors de l'injection d'un param&egrave;tre <code class="code" id="z1x98i0_517">Spring</code> effectue une conversion automatique en fonction du type de l'argument.</p><p id="z1x98i0_513"><span class="control" id="z1x98i0_518">Liste des types convertibles</span></p><div class="table-wrapper"><table class="wide" id="z1x98i0_514"><thead><tr class="ijRowHead" id="z1x98i0_519"><th id="z1x98i0_526"><p>Type Java</p></th><th id="z1x98i0_527"><p>Exemple d&rsquo;URL</p></th><th id="z1x98i0_528"><p>R&eacute;sultat</p></th></tr></thead><tbody><tr id="z1x98i0_520"><td id="z1x98i0_529"><p><code class="code" id="z1x98i0_532">int</code></p></td><td id="z1x98i0_530"><p><code class="code" id="z1x98i0_533">?age=25</code></p></td><td id="z1x98i0_531"><p><code class="code" id="z1x98i0_534">25</code></p></td></tr><tr id="z1x98i0_521"><td id="z1x98i0_535"><p><code class="code" id="z1x98i0_538">boolean</code></p></td><td id="z1x98i0_536"><p><code class="code" id="z1x98i0_539">?active=true</code></p></td><td id="z1x98i0_537"><p><code class="code" id="z1x98i0_540">true</code></p></td></tr><tr id="z1x98i0_522"><td id="z1x98i0_541"><p><code class="code" id="z1x98i0_544">double</code></p></td><td id="z1x98i0_542"><p><code class="code" id="z1x98i0_545">?score=9.5</code></p></td><td id="z1x98i0_543"><p><code class="code" id="z1x98i0_546">9.5</code></p></td></tr><tr id="z1x98i0_523"><td id="z1x98i0_547"><p><code class="code" id="z1x98i0_550">LocalDate</code></p></td><td id="z1x98i0_548"><p><code class="code" id="z1x98i0_551">?date=2024-12-01</code></p></td><td id="z1x98i0_549"><p><code class="code" id="z1x98i0_552">2024-12-01</code></p></td></tr><tr id="z1x98i0_524"><td id="z1x98i0_553"><p><code class="code" id="z1x98i0_556">List&lt;String&gt;</code></p></td><td id="z1x98i0_554"><p><code class="code" id="z1x98i0_557">?tags=java,spring,boot</code></p></td><td id="z1x98i0_555"><p><code class="code" id="z1x98i0_558">[&quot;java&quot;, &quot;spring&quot;, &quot;boot&quot;]</code></p></td></tr><tr id="z1x98i0_525"><td id="z1x98i0_559"><p>Enum</p></td><td id="z1x98i0_560"><p><code class="code" id="z1x98i0_562">?role=ADMIN</code></p></td><td id="z1x98i0_561"><p><code class="code" id="z1x98i0_563">Role.ADMIN</code></p></td></tr></tbody></table></div><p id="z1x98i0_515"><span class="control" id="z1x98i0_564">Erreurs possibles et exceptions retourn&eacute;es</span></p><ul class="list _bullet" id="z1x98i0_516"><li class="list__item" id="z1x98i0_565"><p id="z1x98i0_568">Valeur absente (sans d&eacute;faut) : <code class="code" id="z1x98i0_569">MissingServletRequestParameterException</code></p></li><li class="list__item" id="z1x98i0_566"><p id="z1x98i0_570">Format incompatible : <code class="code" id="z1x98i0_571">TypeMismatchException</code></p></li><li class="list__item" id="z1x98i0_567"><p id="z1x98i0_572">Enum non reconnu : <code class="code" id="z1x98i0_573">IllegalArgumentException</code></p></li></ul></section><section class="chapter"><h4 id="les-attributs-de-requestparam" data-toc="les-attributs-de-requestparam">Les attributs de <code class="code" id="z1x98i0_578">@RequestParam</code></h4><div class="table-wrapper"><table class="wide" id="z1x98i0_575"><thead><tr class="ijRowHead" id="z1x98i0_579"><th id="z1x98i0_582"><p>&Eacute;l&eacute;ment</p></th><th id="z1x98i0_583"><p>Description</p></th></tr></thead><tbody><tr id="z1x98i0_580"><td id="z1x98i0_584"><p><code class="code" id="z1x98i0_586">required = true</code> (d&eacute;faut)</p></td><td id="z1x98i0_585"><p>D&eacute;clenche une erreur si le param&egrave;tre est absent</p></td></tr><tr id="z1x98i0_581"><td id="z1x98i0_587"><p><code class="code" id="z1x98i0_589">defaultValue</code></p></td><td id="z1x98i0_588"><p>Fournit une valeur par d&eacute;faut si le param&egrave;tre est manquant</p></td></tr></tbody></table></div><p id="z1x98i0_576"><span class="control" id="z1x98i0_590">Exemple avec une valeur par d&eacute;faut</span></p><div class="code-block" data-lang="java">

@GetMapping(&quot;/hello&quot;)
@ResponseBody
public String hello(
        @RequestParam(value = &quot;user&quot;, required = false, defaultValue = &quot;invité&quot;)
        String username
) {
    return &quot;Salut &quot; + username;
}
</div></section><section class="chapter"><h4 id="r-cup-ration-de-tous-les-param-tres" data-toc="r-cup-ration-de-tous-les-param-tres">R&eacute;cup&eacute;ration de tous les param&egrave;tres</h4><p id="z1x98i0_591">Si le type de l'argument est un Map, <code class="code" id="z1x98i0_593">Spring</code> injectera l'ensemble des informations du querystring dans cette collection. Ce comportement est valable pour tous les types de param&egrave;tres.</p><div class="code-block" data-lang="java">

@GetMapping(&quot;/params&quot;)
@ResponseBody
public String allParams(@RequestParam Map&lt;String, String&gt; params) {
    return &quot;Paramètres reçus : &quot; + params.toString();
}
</div></section></section><section class="chapter"><h3 id="path-variable" data-toc="path-variable">Path Variable</h3><p id="z1x98i0_594">Similaire &agrave; <code class="code" id="z1x98i0_600">@RequestParam</code>, l'annotation <code class="code" id="z1x98i0_601">@PathVariable</code> se place &eacute;galement dans la signature de la m&eacute;thode, Cependant le param&egrave;tre est encadr&eacute; par des accolades. Par d&eacute;faut, le nom de la variable correspond &agrave; celui du param&egrave;tre attendu.</p><div class="code-block" data-lang="java">
// Attendu /users/5
@GetMapping(&quot;/users/{id}&quot;)
@ResponseBody
public String getUser(@PathVariable Long id) {
    return &quot;User ID : &quot; + id;
}
</div><p id="z1x98i0_596">Si le nom du param&egrave;tre diff&egrave;re du nom de l'argument, il faut pr&eacute;ciser la correspondance dans les attributs de l'annotation.</p><div class="code-block" data-lang="java">
// Attendu /users/5
@GetMapping(&quot;/users/{id}&quot;)
@ResponseBody
// Ici on ajoute la correspondance dans @PathVariable
public String getUser(@PathVariable(&quot;id&quot;) Long userId) {
    return &quot;User ID : &quot; + id;
}
</div><section class="chapter"><h4 id="les-attributs-de-pathvariable" data-toc="les-attributs-de-pathvariable">Les attributs de @PathVariable</h4><div class="table-wrapper"><table class="wide" id="z1x98i0_602"><thead><tr class="ijRowHead" id="z1x98i0_603"><th id="z1x98i0_607"><p>Option</p></th><th id="z1x98i0_608"><p>Type</p></th><th id="z1x98i0_609"><p>Description</p></th><th id="z1x98i0_610"><p>Exemple</p></th></tr></thead><tbody><tr id="z1x98i0_604"><td id="z1x98i0_611"><p><code class="code" id="z1x98i0_615">value</code></p></td><td id="z1x98i0_612"><p><code class="code" id="z1x98i0_616">String</code></p></td><td id="z1x98i0_613"><p>Nom du param&egrave;tre tel qu&rsquo;il appara&icirc;t dans l&rsquo;URL</p></td><td id="z1x98i0_614"><p><code class="code" id="z1x98i0_617">@PathVariable(&quot;id&quot;) Long userId</code></p></td></tr><tr id="z1x98i0_605"><td id="z1x98i0_618"><p><code class="code" id="z1x98i0_622">name</code></p></td><td id="z1x98i0_619"><p><code class="code" id="z1x98i0_623">String</code></p></td><td id="z1x98i0_620"><p>Synonyme de <code class="code" id="z1x98i0_624">value</code> (depuis Spring 4.3)</p></td><td id="z1x98i0_621"><p><code class="code" id="z1x98i0_625">@PathVariable(name = &quot;slug&quot;) String</code></p></td></tr><tr id="z1x98i0_606"><td id="z1x98i0_626"><p><code class="code" id="z1x98i0_630">required</code></p></td><td id="z1x98i0_627"><p><code class="code" id="z1x98i0_631">boolean</code></p></td><td id="z1x98i0_628"><p>Param&egrave;tre obligatoire ? (<code class="code" id="z1x98i0_632">true</code> par d&eacute;faut)</p></td><td id="z1x98i0_629"><p><code class="code" id="z1x98i0_633">@PathVariable(required = false)</code></p></td></tr></tbody></table></div></section><section class="chapter"><h4 id="param-tres-optionnels" data-toc="param-tres-optionnels">Param&egrave;tres optionnels</h4><p id="z1x98i0_634">En pratique, <code class="code" id="z1x98i0_637">@PathVariable(required = false)</code> n&rsquo;a aucun effet si le chemin n&rsquo;est pas d&eacute;fini comme optionnel dans le @GetMapping.</p><p id="z1x98i0_635"><code class="code" id="z1x98i0_638">Spring</code> exige que tous les segments {} pr&eacute;sents dans le chemin soient fournis, sauf s'il existe une route qui omet le param&egrave;tre :</p><div class="code-block" data-lang="java">

@GetMapping({&quot;/category&quot;, &quot;/category/{name}&quot;})
@ResponseBody
public String category(
        @PathVariable(required = false) String name
) {
    return &quot;Catégorie : &quot; + (name != null ? name : &quot;générique&quot;);
}
</div></section></section><section class="chapter"><h3 id="request-body" data-toc="request-body">Request Body</h3><p id="z1x98i0_639"><code class="code" id="z1x98i0_641">@RequestBody</code> correspond &agrave; du contenu <code class="code" id="z1x98i0_642">JSON</code> ou <code class="code" id="z1x98i0_643">XML</code> envoy&eacute; dans le corps de la requ&ecirc;te <code class="code" id="z1x98i0_644">HTTP</code>. <code class="code" id="z1x98i0_645">Spring</code> d&eacute;s&eacute;rialise ce contenu automatiquement pour le convertir en objet.</p><div class="code-block" data-lang="java">

@PostMapping(&quot;/api/users&quot;)
@ResponseBody
public String createUser(@RequestBody User user) {
    return &quot;Bienvenue &quot; + user.getName();
}
</div></section><section class="chapter"><h3 id="request-header" data-toc="request-header">Request Header</h3><p id="z1x98i0_646">Injecte la valeur d'un en-t&ecirc;te <code class="code" id="z1x98i0_648">HTTP</code> dans un argument de la m&eacute;thode.</p><div class="code-block" data-lang="java">

@GetMapping(&quot;/device&quot;)
@ResponseBody
public String detect(@RequestHeader(&quot;User-Agent&quot;) String agent) {
    return &quot;Ton navigateur : &quot; + agent;
}
</div></section><section class="chapter"><h3 id="cookie-value" data-toc="cookie-value">Cookie Value</h3><div class="code-block" data-lang="java">

@GetMapping(&quot;/welcome&quot;)
@ResponseBody
public String welcome(@CookieValue(&quot;sessionId&quot;) String sessionId) {
    return &quot;Session ID : &quot; + sessionId;
}
</div></section><section class="chapter"><h3 id="model-attribute" data-toc="model-attribute">Model Attribute</h3><p id="z1x98i0_650">Hydrate automatiquement un objet avec la saisie d'un formulaire.</p><div class="code-block" data-lang="java">

@PostMapping(&quot;/register&quot;)
@ResponseBody
public String register(@ModelAttribute User user) {
    return &quot;Bienvenue &quot; + user.getName();
}
</div></section><section class="chapter"><h3 id="session-attribute" data-toc="session-attribute">Session Attribute</h3><p id="z1x98i0_652">Injecte la valeur d'une variable de session dans un argument. S'il s'agit d'un objet s&eacute;rialis&eacute;, le simple fait de caster d&eacute;s&eacute;rialise</p><div class="code-block" data-lang="java">

@GetMapping(&quot;/profile&quot;)
public String profile(@SessionAttribute(&quot;user&quot;) User user) {
    return &quot;Bonjour &quot; + user.getName();
}
</div></section></section><div class="last-modified">Last modified: 14 mai 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="001-intro.html" class="navigation-links__prev">Intro</a><a href="002-00-thymeleaf.html" class="navigation-links__next">Thymeleaf</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b725/app.js"></script></body></html>